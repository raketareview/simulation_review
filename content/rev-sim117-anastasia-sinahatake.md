https://github.com/sinahatake/Simulation  
[Anastasia]

–ï—Å—Ç—å –Ω–∞–¥ —á–µ–º –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å.

## –•–û–†–û–®–û

+ üëç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å—É—â–µ—Å—Ç–≤ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Å–∞–º–∏—Ö —Å—É—â–µ—Å—Ç–≤–∞—Ö(–º–Ω–µ —Ç–∞–∫ –±–æ–ª—å—à–µ –Ω—Ä–∞–≤–∏—Ç—Å—è)
+ üëç –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–∞—É–∑–∞/–ø—É—Å–∫ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã

## –ó–ê–ú–ï–ß–ê–ù–ò–Ø

**1. –ù–µ–π–º–∏–Ω–≥**

- –ü—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–π—Å—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è. –ø–∞–∫–µ—Ç—ã –Ω–∞–∑—ã–≤–∞–π –∏–ª–∏ –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º, –∏–ª–∏ –≤–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —á–∏—Å–ª–µ
```Java
package actions;
package entity;
```

- –î–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—É—Ç–∞–Ω–∏—Ü—ã –Ω–µ –Ω–∞–∑—ã–≤–∞–π –ø–∞–∫–µ—Ç—ã, –∫–ª–∞—Å—Å—ã, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ç–∞–∫ –∂–µ, –∫–∞–∫ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–ª–∞—Å—Å—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.  
–ï—Å—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Map`, –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ —Å —Ç–∞–∫–∏–º –∂–µ –Ω–∞–∑–≤–∞–Ω–∏–µ–º
```java 
package map;

//–ü–†–ê–í–ò–õ–¨–ù–û:
package gamemap;
```

- –ê–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –ª—É—á—à–µ –ø–∏—Å–∞—Ç—å —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ –¥—Ä—É–≥–∏–µ —Å–ª–æ–≤–∞
```java
class BFSPathFinder

//–õ–£–ß–®–ï:
class BfsPathFinder
```
–ù–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–Ω—è—Ç–Ω–µ–µ: HTTPURL –∏–ª–∏ HttpUrl?

- –ò–∑–±–µ–≥–∞–π –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç–µ–π. 

–ü–æ–¥ "–ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º" –≤ —è–≤–µ –ø–æ–Ω–∏–º–∞–µ—Ç—Å—è –Ω–µ—á—Ç–æ –æ—Ç–ª–∏—á–Ω–æ–µ –æ—Ç –ø–µ—á–∞—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å. –ê —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø–µ—á–∞—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Å–æ–ª—å
```java
void logEntitiesState()

//–ü–†–ê–í–ò–õ–¨–ù–û:
void printEntitiesState()
```
*Oracle Java code conventions, part."Naming conventions"*  
*–ú–∞—Ä—Ç–∏–Ω, "–ß–∏—Å—Ç—ã–π –∫–æ–¥", –≥–ª.2*  
*–Æ—Ç—É–±, –ù–µ–º—á–∏–Ω—Å–∫–∏–π "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –º–µ—Ç–æ–¥—ã –∏ –∫–ª–∞—Å—Å—ã?"*

**2. –¢–µ–∫—Å—Ç –≤ exception** –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ
```java
throw new IllegalArgumentException("–ü–æ–∑–∏—Ü–∏—è " + pos + " –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –∫–∞—Ä—Ç—ã.");
```
–ò—Å–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–µ–ª–µ–≥—Ä–∞–º–º–∞, –∫–æ—Ç–æ—Ä–∞—è –ª–µ—Ç–∏—Ç —Å–∫–≤–æ–∑—å —Å–ª–æ–∏. 
–£ exception –æ—Å–æ–±–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ- –µ—Å–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–ª–µ—Ç–∏—Ç –∏ –Ω–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ç–æ –∞–≤–∞—Ä–∏–π–Ω–æ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.
–¢–æ–≥–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –±—É–¥–µ—Ç —Ä–∞—Å–ø–µ—á–∞—Ç–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —ç–∫—Å–µ–ø—à–µ–Ω–∞, –∏ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–Ω—è—Ç–Ω–æ —Å–∏—Å–∞–¥–º–∏–Ω—É –≤ –ª—é–±–æ–π —Ç–æ—á–∫–µ –ø–ª–∞–Ω–µ—Ç—ã. 
–ê –∑–Ω–∞—á–∏—Ç, —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º. 

–ò–Ω—Ç–µ—Ä–ø—Ä–∏—Ç–∞—Ü–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–≤–æ–¥ –µ–≥–æ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —è–∑—ã–∫ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —Ç–∞–º, –≥–¥–µ —ç—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã. 
–ò–ª–∏ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤–æ–≤—Å–µ, –µ—Å–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å.

**3. –ù–∞—Ä—É—à–µ–Ω–∏–µ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ –∫–æ–¥–∞**

–í –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ –≤—ã–¥–µ–ª—è–π —Ç–µ–ª–æ –±–ª–æ–∫–∞ —Å–∫–æ–±–æ—á–∫–∞–º–∏, –¥–∞–∂–µ –µ—Å–ª–∏ —Ç–µ–ª–æ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. 
–ò—Å–∫–ª—é—á–µ–Ω–∏–µ- –º–µ—Ç–æ–¥ equals(), —Ç–∞–º –º–æ–∂–Ω–æ –ø–æ—Å–ª–µ if –Ω–µ –≤—ã–¥–µ–ª—è—Ç—å –±–ª–æ–∫–∏ —Å–∫–æ–±–æ—á–∫–∞–º–∏
```java
if (!isInsideBounds(pos)) return false;
if (map.isInsideBounds(p))
  list.add(p);

//–ü–†–ê–í–ò–õ–¨–ù–û:
if (!isInsideBounds(pos)) {
  return false;
}
if (map.isInsideBounds(p)) {
  list.add(p);
}
```

**4. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫**

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—á–∞—Ç–∞—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É —Å –±–æ–ª–µ–µ, —á–µ–º –æ–¥–Ω–∏–º –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä—å —Å–æ–æ–±—â–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–π —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ- —Ç–æ–≥–¥–∞ —Å—Ä–∞–∑—É –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω –≤–µ—Å—å —à–∞–±–ª–æ–Ω
```java
System.out.print(" " + grid[i][j] + " ");

//–ü–†–ê–í–ò–õ–¨–ù–û:
System.out.printf(" %s ", grid[i][j]);
```

**5. –ù–∞—Ä—É—à–µ–Ω–∏–µ DRY**, –º–∞–≥–∏—á–µ—Å–∫–∏–µ –±—É–∫–≤—ã, —á–∏—Å–ª–∞, —Å–ª–æ–≤–∞. –í–≤–æ–¥–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã 
```java
System.out.println("–ù–∞–∂–º–∏—Ç–µ 'P' –¥–ª—è –ø–∞—É–∑—ã, 'Q' –¥–ª—è –≤—ã—Ö–æ–¥–∞");
if (cmd.equals("P")) {...}
if (cmd.equals("Q")) {...}

//–ü–†–ê–í–ò–õ–¨–ù–û:
private final static String PAUSE = "P";
private final static String QUIT = "Q";

System.out.printf("–ù–∞–∂–º–∏—Ç–µ '%s' –¥–ª—è –ø–∞—É–∑—ã, '%s' –¥–ª—è –≤—ã—Ö–æ–¥–∞ \n", PAUSE, QUIT);
if (cmd.equals(PAUSE)) {...}
if (cmd.equals(QUIT)) {...}
```
*–§–∞—É–ª–µ—Ä, "–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥", –≥–ª.8, "–ó–∞–º–µ–Ω–∞ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —á–∏—Å–ª–∞ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π"*  
*refactoring.guru "–ó–∞–º–µ–Ω–∞ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —á–∏—Å–ª–∞ —Å–∏–º–≤–æ–ª—å–Ω–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π"*  

**6. record Position(int x, int y)**

+ üëç –ù–µ—Ç –Ω–∏—á–µ–≥–æ –ª–∏—à–Ω–µ–≥–æ, —ç—Ç–æ —Ö–æ—Ä–æ—à–æ. Record –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã- –∏–¥–µ–∞–ª—å–Ω–æ.

- –ò–∑–±—ã—Ç–æ—á–Ω–æ.

–≠—Ç–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–º—ã—Å–ª–∞- –Ω–µ—è–≤–Ω—è—ã–µ –≥–µ—Ç—Ç–µ—Ä—ã –≤ record'–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ —Ç–∞–∫ –∂–µ
```java
public record Position(int x, int y) {
  @Override
  public int x() {
    return x;
  }

  @Override
  public int y() {...}
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
public record Position(int x, int y) {
}
```
–í–æ–æ–±—â–µ, —Ä–µ–∫–æ—Ä–¥ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ —á—Ç–æ-—Ç–æ –ø—Ä–æ—Å—Ç–æ–µ –∏ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ. 
–ï—Å–ª–∏ –Ω–∞ `record` —Ö–æ—á–µ—Ç—Å—è –Ω–∞–≤–µ—Å–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤ –≤–∏–¥–µ –º–µ—Ç–æ–¥–æ–≤, —Ç–æ –Ω—É–∂–Ω–æ –ø–æ–¥—É–º–∞—Ç—å- –∞ –Ω–µ —Å—Ç–æ–∏—Ç –ª–∏ —Ç–æ–≥–¥–∞ –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ —Å–¥–µ–ª–∞—Ç—å –æ–±—ã—á–Ω—ã–π `class`.

**7. class WorldMap**

- –ò–∑–±—ã—Ç–æ—á–Ω–æ.

–ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–º–µ—Ç—å –¥–≤–µ —Ö–µ—à–º–∞–ø—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç –∑–∞–ø–∏—Å–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞-—Å—É—â–µ—Å—Ç–≤–æ –∏ —Å—É—â–µ—Å—Ç–≤–æ-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞.
–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–º–µ—Ç—å —Ç–æ–ª—å–∫–æ —Ö–µ—à–º–∞–ø—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞-—Å—É—â–µ—Å—Ç–≤–æ
```java
private final Map<Position, Entity> occupancy = new HashMap<>();  <-- –≠–¢–û–ì–û –î–û–°–¢–ê–¢–û–ß–ù–û
private final Map<Entity, Position> locations = new HashMap<>();  <-- –≠–¢–û –ò–ó–ë–´–¢–û–ß–ù–û
```
–î–≤–µ —Ö–µ—à–º–∞–ø—ã –º–æ–≥—É—Ç —É–ª—É—á—à–∏—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –ù–æ –æ–Ω–∏ —É—Å–ª–æ–∂–Ω—è—é—Ç –∫–æ–¥ –∏ –¥–µ–ª–∞—é—Ç –∫–ª–∞—Å—Å –±–æ–ª–µ–µ –≥—Ä–æ–º–æ–∑–¥–∫–∏–º.  
–í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –Ω—É–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –ø—Ä–æ—Å—Ç–æ—Ç—É.  
–ü—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–º.

- –ù–∞—Ä—É—à–µ–Ω–∏–µ SRP, –º–µ—Ç–æ–¥—ã —á—É–∂–∏—Ö –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π. 

–ö–∞—Ä—Ç–∞ –¥–æ–ª–∂–Ω–∞ —Ç–æ–ª—å–∫–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–∞ –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –Ω–∏–º–∏: –≤—Å—Ç–∞–≤–∏—Ç—å, –≤—ã–¥–∞—Ç—å –æ–¥–Ω–æ —Å—É—â–µ—Å—Ç–≤–æ –∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ö—Ä–∞–Ω–∏–º—ã—Ö —Å—É—â–µ—Å—Ç–≤, —É–¥–∞–ª–∏—Ç—å.
–ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –º–µ—Ç–æ–¥ –Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, –∑–Ω–∞—á–∏—Ç –æ–Ω –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∫ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã, –∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∫ —á—É–∂–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.
–ó–¥–µ—Å—å –º–µ—Ç–æ–¥—ã —á—É–∂–∏—Ö –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π:  
–ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—É—â–µ—Å—Ç–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞, –≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ—Ö –∫—Ä–µ–∞—Ç—É—Ä, –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á—Ç–æ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ –Ω—É–∂–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞.

–ù–∞–≤–µ—Ä–Ω–æ–µ, –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ü–µ–ª–æ–º –ø–æ–ª–µ–∑–Ω–æ –∏–º–µ—Ç—å –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Å—á–∏—Ç–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤ –Ω—É–∂–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞. 
–ù–æ —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –∏–º–µ–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ –µ–¥–∏–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã- —Ö—Ä–∞–Ω–µ–Ω–∏—é —Å—É—â–µ—Å—Ç–≤ –≤ —Å–µ–±–µ.  
–î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è/–≤—ã–¥–∞—á–∏ —Å—É—â–µ—Å—Ç–≤, –∫–∞—Ä—Ç–µ –Ω–µ –Ω—É–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å –∑–∞–π—Ü–µ–≤ –∏ –≤–æ–ª–∫–æ–≤.  

–ú–µ—Ç–æ–¥—ã —á—É–∂–∏—Ö –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Ç–µ—Ö –∫–ª–∞—Å—Å–∞—Ö, –≤ –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç.
–ï—Å–ª–∏ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ –∫–ª–∞—Å—Å—ã, —Ç–æ –º–µ—Ç–æ–¥ –Ω—É–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä, BoardUtils.

- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–π null
```java
private final Map<Entity, Position> locations = new HashMap<>();

public Position getPositionByEntity(Entity entity) {
  return locations.get(entity);  <-- –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å null
}
```
–í–æ–∑–≤—Ä–∞—Ç null –ø–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è NullPointerException –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ.  
*–ú–∞—Ä—Ç–∏–Ω, "–ß–∏—Å—Ç—ã–π –∫–æ–¥", –≥–ª.7.7-8*  
*–Æ—Ç—É–±, –ù–µ–º—á–∏–Ω—Å–∫–∏–π "–ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å NULL?"*

- –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —É–¥–∞–ª–∏—Ç—å —Å—É—Å–ª–∏–∫–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç, –Ω—É–∂–Ω–æ –∫–∏–¥–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
```java
public void removeEntity(Position pos) {
  Entity entityToRemove = occupancy.get(pos);
  if (entityToRemove != null) {
    occupancy.remove(pos);
    locations.remove(entityToRemove);
  }
}
```
–°–µ–π—á–∞—Å –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —É–¥–∞–ª–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ –ø–æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–µ, –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç.  
–ò —Å–Ω–∞—á–∞–ª–∞ —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Ö–æ—Ä–æ—à–∏–º –≤—ã–±–æ—Ä–æ–º- –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∫—Ä–∞—à–∏—Ç—Å—è –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å. 

–ù–æ –≤ —Ç–æ–º-—Ç–æ –∏ –¥–µ–ª–æ, —á—Ç–æ –ø–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–∏—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Å—É—â–µ—Å—Ç–≤–æ –æ–∑–Ω–∞—á–∞–µ—Ç –±–∞–≥ –∞–ª–≥–æ—Ä–∏—Ç–º–∞- –∑–Ω–∞—á–∏—Ç, –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. 
–≠—Ç—É —Å–∏—Ç—É–∞—Ü–∏—é –Ω—É–∂–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ –≤—ã—è–≤–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.  
–ò–Ω–∞—á–µ, –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –±—É–¥–µ—Ç —Å–∞–º—ã–π —Å—Ç—Ä–∞—à–Ω—ã–π –±–∞–≥- –ø–ª–∞–≤–∞—é—â–∏–π, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ç–æ –ø—Ä–æ—è–≤–ª—è—Ç—å—Å—è –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ç–æ –Ω–µ—Ç.

+ üëç –•–æ—Ä–æ—à–æ, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–æ–ø–∏—è –º–∞–ø—ã, –∞ –Ω–µ –æ—Ä–∏–≥–∏–Ω–∞–ª. –¢–µ–º —Å–∞–º—ã–º —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –∏ –∑–∞—â–∏—â–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∫–ª–∞—Å—Å–∞
```java  
private final Map<Position, Entity> occupancy = new HashMap<>();

public Map<Position, Entity> getOccupancy() {
  return new HashMap<>(occupancy);
}
```

+ üëç –•–æ—Ä–æ—à–æ, —á—Ç–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å—É—â–µ—Å—Ç–≤–∞, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞- –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –æ–Ω–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–∞—Ä—Ç—ã –∏–ª–∏ –Ω–µ—Ç.

- –ù–∞—Ä—É—à–µ–Ω–∏–µ SRP, OCP. 

–ö–∞—Ä—Ç–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ –≤—Å–µ–º–∏ —Ö—Ä–∞–Ω–∏–º—ã–º–∏ —Å—É—â–µ—Å—Ç–≤–∞–º–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ –∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫-—Ç–æ –ø–æ-–æ—Å–æ–±–æ–º—É —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–ª–∞—Å—Å–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π –∏ –Ω–µ –¥–æ–ª–∂–Ω–∞ –¥–∞–∂–µ –∑–Ω–∞—Ç—å –ø–æ –∏–º–µ–Ω–∞–º –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ Entity
```java
public Set<Creature> getAllCreatures()

//–ü–†–ê–í–ò–õ–¨–ù–û –¢–ê–ö:
public Set<Entity> getAllEntities() //—ç—Ç–æ—Ç –º–µ—Ç–æ–¥ —É–∂–µ –µ—Å—Ç—å –≤ –∫–∞—Ä—Ç–µ- –ø—É—Å—Ç—å –∫–ª–∏–µ–Ω—Ç –æ—Ç–±–∏—Ä–∞–µ—Ç –æ—Ç—Å—é–¥–∞ –∫—Ä–µ–∞—Ç—É—Ä

//–ò–õ–ò –¢–ê–ö:
public List<? extends Entity> getAllBy(Class<? extends Entity> clazz)  //–≤–µ—Ä–Ω—É—Ç—å —Å—É—â–µ—Å—Ç–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ 
```
–ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ –±—É–¥–µ—Ç –∑–Ω–∞—Ç—å –ø–æ –∏–º–µ–Ω–∞–º –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ Entity –∏ –∏–º–µ—Ç—å –¥–ª—è –Ω–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã, —Ç–æ –∫–ª–∞—Å—Å –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π.  
–ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –ø—Ä–æ–µ–∫—Ç –∫–ª–∞—Å—Å–∞ –ü—Ç–∏—Ü–∞, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å –∫–ª–∞—Å—Å –ö–∞—Ä—Ç–∞ –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –Ω–µ–≥–æ –º–µ—Ç–æ–¥ `getAllBirds()`.

- –ú–µ—Ç–æ–¥ —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ö–æ–¥–∞ –≤ –∫–∞—Ä—Ç–µ- –Ω–∞—Ä—É—à–µ–Ω–∏–µ SRP.
–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –∏–∑ –∫–∞—Ä—Ç—ã –º–µ—Ç–æ–¥ —Ö–æ–¥–∞ –∏ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–π—Ü–∞ –∏–∑ –æ–¥–Ω–æ–≥–æ –∫—Ä–∞—è –≤ –¥—Ä—É–≥–æ–π –º–∏–Ω—É—è –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏—Å—Ç–∏–∫–∏
```java
–ö–∞—Ä—Ç–∞ –∫–∞—Ä—Ç–∞ = new –ö–∞—Ä—Ç–∞(100, 100);
–ó–∞—è—Ü –∑–∞—è—Ü = new –ó–∞—è—Ü();
–∫–∞—Ä—Ç–∞.putEntity(new –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞(0, 0), –∑–∞—è—Ü);
–∫–∞—Ä—Ç–∞.moveEntity(–∑–∞—è—Ü, new –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ (99, 99));

/* class –ö–∞—Ä—Ç–∞ */
public void moveEntity(Entity entity, Position newPos) {
  //17 —Å—Ç—Ä–æ–∫ –ª–æ–≥–∏–∫–∏
}
```
–î–æ–ª–∂–Ω–∞ –ª–∏ –∫–∞—Ä—Ç–∞ —É—á–∏—Ç—ã–≤–∞—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫—É –∑–∞–π—Ü–µ–≤? –ï—Å–ª–∏ –¥–∞, —Ç–æ –∫–∞–∫?

–ó–¥–µ—Å—å –º–µ—Ç–æ–¥ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ —á–∞—Å—Ç–∏—á–Ω–æ –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å- –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–∞–∫–∏–µ-—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∏. 
–¢–µ–º —Å–∞–º—ã–º –ö–∞—Ä—Ç–∞, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏, –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è —á–∞—Å—Ç—å –æ–±—â–µ–∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏- —Ö—Ä–∞–Ω–∏—Ç —á–∞—Å—Ç—å –ø—Ä–∞–≤–∏–ª —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ö–æ–¥–∞ —Å—É—â–µ—Å—Ç–≤–∞–º–∏.  
–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç- –∫–∞—Ä—Ç–∞ –≤–æ–æ–±—â–µ –Ω–µ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –≤ —Å–µ–±–µ –º–µ—Ç–æ–¥ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏.

–ù–∞–ø–æ–º–∏–Ω–∞—é, —á—Ç–æ –µ–¥–∏–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç—ã- —Ö—Ä–∞–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –∫ –Ω–∏–º –¥–æ—Å—Ç—É–ø.  
–ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤ –ø–æ –∫–∞—Ä—Ç–µ –∫ —ç—Ç–æ–º—É –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è.

- –°—Ä–∞–∑—É –∫–∞—Å—Ç—É–π
```java
if (entity instanceof Creature) {
  creatures.add((Creature) entity);
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
if (entity instanceof Creature creature) {
  creatures.add(creature);
}
```

**8.interface PathFinder**

+ üëç –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏ —ç—Ç–æ —Ö–æ—Ä–æ—à–æ. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞: BFS, AStar –∏ —Ç.–¥.

+ üëç –°–∏–≥–Ω–∞—Ç—É—Ä–∞ –º–µ—Ç–æ–¥–∞ –ø–æ–∏—Å–∫–∞- –∏–¥–µ–∞–ª—å–Ω–æ
```java
List<Position> findPath(Position start, Class<? extends Entity> targetType, WorldMap map);
```

**9. class BFSPathFinder implements PathFinder**

- –ú–∞–ø–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –æ–±—ã—á–Ω–æ –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —ç—Ä–∑–∞—Ü-–∑–∞–º–µ–Ω–∏—Ç–µ–ª—å —Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
```java
Map<Position, Position> parent = new HashMap<>();
```
–í–º–µ—Å—Ç–æ –º–∞–ø—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Å–¥–µ–ª–∞–π –∫–ª–∞—Å—Å —Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞, –∞–ª–≥–æ—Ä–∏—Ç–º —Ç–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø–æ–Ω—è—Ç–Ω–µ–µ.
–ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫:
```java
class Node {
  private Coordinates coordinates; 
  private Node parent;
  //...
  public Coordinates getCoordinates() {...}
  public Node getParent() {...}
}
```

- –û—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π —Å—Ä–∞–∑—É
```java
LinkedList<Position> path = new LinkedList<>();

while (!cur.equals(start)) {
  //...    
  if (cur == null)
    return Collections.emptyList();
}

return path;

//–ü–†–ê–í–ò–õ–¨–ù–û:
if(cur == null) {
  return Collections.emptyList();
}

LinkedList<Position> path = new LinkedList<>();

while (!cur.equals(start)) {
  //...    
}

return path;
```

**10. abstract class Entity**

- –ù–∞—Ä—É—à–µ–Ω–∏–µ SRP, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –æ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è- —Å—É—â–µ—Å—Ç–≤–æ —Ö—Ä–∞–Ω–∏—Ç —Å–ø—Ä–∞–π—Ç —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
```java
public abstract String getSymbol();
```
–ú–æ–¥–µ–ª—å(–∞ —ç—Ç–æ –º–æ–¥–µ–ª—å) –Ω–µ –¥–æ–ª–∂–Ω–∞ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏ –∑–Ω–∞—Ç—å, –∫–∞–∫ –µ–µ –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —é–∑–µ—Ä—É.  
–ü–æ—Ç–æ–º—É —á—Ç–æ –≤ —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö(–∫–æ–Ω—Å–æ–ª—å, Swing, Android) –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –º–æ–¥–µ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∞ —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏- –ø–∏–∫—Å–µ–ª—å–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–æ–π, –∞–Ω–∏–º–∞—Ü–∏–µ–π etc.  
–°–ø—Ä–∞–π—Ç—ã –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤ –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –∫–ª–∞—Å—Å–µ, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å–ø–µ—á–∞—Ç—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É.

**11. abstract class Creature extends Entity**

- –ù–∞—Ä—É—à–µ–Ω–∏–µ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ –∫–æ–¥–∞.

–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω —Å—Ç–æ—è—Ç—å –ø–µ—Ä–≤—ã–º –∏–∑ –º–µ—Ç–æ–¥–æ–≤. 
–ò–Ω–∞—á–µ —ç—Ç–æ –≤–≤–æ–¥–∏—Ç —á–∏—Ç–∞—Ç–µ–ª—è –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ- –æ–Ω –ø–æ–¥—É–º–∞–µ—Ç, —á—Ç–æ —É –∫–ª–∞—Å—Å–∞ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. 
–ê —Ç—É—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–∫ —Ä–∞–∑ –∏ –Ω–µ—Ç.

- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.

–í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å PathFinder. –ê –∑–Ω–∞—á–∏—Ç, –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π(BFS, A*).  
–ï—Å–ª–∏ –∫—Ä–µ–∞—Ç—É—Ä–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –ø–æ–∏—Å–∫, —Ç–æ –æ–Ω–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å —Å–µ–±–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —ç—Ç–æ–≥–æ –ø–æ–∏—Å–∫–∞, –∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –µ–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä.  
–≠—Ç–æ —Å–¥–µ–ª–∞–µ—Ç –∫–ª–∞—Å—Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º –∏ –æ–Ω —Å–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π –ø–æ–∏—Å–∫
```java
public abstract class Creature extends Entity {
  private final PathFinder pathFinder = new BFSPathFinder();

  public Creature(int hp, int speed) {...}
  //...
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
public abstract class Creature extends Entity {
  private final PathFinder pathFinder;

  public Creature(int hp, int speed, PathFinder pathFinder) {...}
  //...
}
```

- –ö—Ä–µ–∞—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ —Å–∞–º–∞ –∑–Ω–∞—Ç—å, —á—Ç–æ –¥–ª—è –Ω–µ–µ —è–≤–ª—è–µ—Ç—Å—è –µ–¥–æ–π. –ò–Ω–∞—á–µ –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –∑–∞—Å—Ç–∞–≤–∏—Ç—å –í–æ–ª–∫–∞ –µ—Å—Ç—å –¢—Ä–∞–≤—É. –ò–ª–∏ –∫–∞–º–Ω–∏
```java
public void makeMove(WorldMap map, Class<? extends Entity> targetType) 

//–ü–†–ê–í–ò–õ–¨–ù–û:
private final Class<? extends Entity> food;

public void makeMove(WorldMap map) 
```

- –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –ø—Ä–∏–µ–º.

–ü–∞—Ä–∞ –∑–Ω–∞—á–µ–Ω–∏–π x/y —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏- –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –ø—Ä–∏–µ–º.  
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –æ–±—ä–µ–∫—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç- –û–û–ü –ø—Ä–∏–µ–º
```java
private void makeRandomMove(WorldMap map) {
  List<int[]> dirs = new ArrayList<>(Arrays.asList(
    new int[]{1, 0},
    new int[]{-1, 0},
    new int[]{0, 1},
    new int[]{0, -1}
  ));
  //...
  for (int[] d : dirs) {
    Position np = new Position(pos.x() + d[0], pos.y() + d[1]);
    //...
  }  
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
private final static List<Position> DIRECTIONS = List.of(new Position(1, 0), ...);

private void makeRandomMove(WorldMap map) {
  //...
  for (Position direction : DIRECTIONS) {
    Position np = sum(pos, direction);
    //...
  }  
}
```

- –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π
```java
public abstract class Creature extends Entity {
  private int satiety = 10;

  public void makeMove(WorldMap map, Class<? extends Entity> targetType) {
      //...
      satiety = 10;
  }
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
private final static int MAX_SATIETY = 10;
private int satiety = MAX_SATIETY;

public void makeMove(WorldMap map, Class<? extends Entity> targetType) {
  //...
  satiety = MAX_SATIETY;
}
```

**12. class Predator extends Creature**

–ù–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—é
```java 
public class Predator extends Creature {
  int attackDamage;
  //..
  public Predator(int hp, int speed, int attackDamage) {...}
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
private final int attackDamage;
```

**13. interface Action**

üëç –ò–¥–µ–∞–ª—å–Ω–æ 
```java 
public interface Action {
  void execute(WorldMap map);
}
```

**14. class SpawnUtils**

- –≠—Ç–æ –Ω–µ —É—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å. –≠—Ç–æ Manager –∏–ª–∏ Helper.

–£—Ç–∏–ª–∏—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `final` –∏ –∏–º–µ—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä.  
–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç —É—Ç–∏–ª–∏—Ç—ã –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –µ–µ —ç–∫–∑–µ–º–ø–ª—è—Ä.  
*–ë–ª–æ—Ö, "Java. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ", –∏–∑–¥.3, –≥–ª.2.4*

- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è.

Null –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–µ–ª—å–∑—è. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –∏–¥–µ—Ç –Ω–µ —Ç–∞–∫- –±—Ä–æ—Å–∞–π –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
```java 
public Position getValidRandomPosition(WorldMap map) {
  //...  
  System.err.println("WARN: –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —Å–ø–∞–≤–Ω–∞.");
  return null;
}
```
–ï—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –º–µ—Ç–æ–¥ –Ω–µ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–≤–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –æ–Ω –¥–æ–ª–∂–µ–Ω –±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.  
–í—ã–∑—ã–≤–∞—é—â–∏–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å.

**15. class SpawnAction implements Action**

+ üëç –í—Å—ë –æ–∫. 

- –°—é–¥–∞ –º–æ–∂–Ω–æ –µ—â–µ –≤—ã–Ω–µ—Å—Ç–∏ –ø–æ–∏—Å–∫ —Å–ª—É—á–∞–π–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ `SpawnUtils`- –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞.

**16. class MoveAllCreaturesAction implements Action**

–í —Ü–µ–ª–æ–º –æ–∫, –Ω–æ —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –Ω–µ –¥–æ–ª–∂–µ–Ω –±—Ä–∞—Ç—å –Ω–∞ —Å–µ–±—è —á—É–∂—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∏ –∑–Ω–∞—Ç—å, –∫–∞–∫—É—é –µ–¥—É –µ–¥—è—Ç –∫—Ä–µ–∞—Ç—É—Ä—ã
```java
if (entity instanceof Creature creature) {
  Class<? extends Entity> targetType = null;
  if (creature instanceof Predator) {
    targetType = Herbivore.class;
  } else if (creature instanceof Herbivore) {
    targetType = Grass.class;
  }
  creature.makeMove(map, targetType);
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
if (entity instanceof Creature creature) {
  creature.makeMove(map);
}
```

–ò–Ω–∞—á–µ, —Å—Ä–µ–¥–∏ –ø—Ä–æ—á–µ–≥–æ, –∫–ª–∞—Å—Å –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –ø—Ä–∏ —Ä–∞–∑–≤–∏—Ç–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –±—É–¥–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å—Å—è:
```java
if (creature instanceof Bird) {
  targetType = Butterfly.class;
}
```

**17. class ConsoleRenderer**

- –ò–∑–±—ã—Ç–æ—á–Ω–æ.

–ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–Ω–∞—á–∞–ª–∞ –¥–µ–ª–∞—Ç—å –º–∞—Å—Å–∏–≤ —Å –ø—É—Å—Ç—ã–º–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏, –ø–æ—Ç–æ–º –∑–∞–ø–æ–ª–Ω—è—Ç—å –∏—Ö —Å–ø—Ä–∞–π—Ç–∞–º–∏ —Å—É—â–µ—Å—Ç–≤, –∞ –ø–æ—Ç–æ–º —ç—Ç–æ—Ç –º–∞—Å—Å–∏–≤ —Ä–∞—Å–ø–µ—á–∞—Ç—ã–≤–∞—Ç—å.  
–°—Ä–µ–¥–∏ –ø—Ä–æ—á–µ–≥–æ —ç—Ç–æ –ø–ª–æ—Ö–æ —Ç–µ–º, —á—Ç–æ –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –∫–∞—Ä—Ç–∞—Ö —ç—Ç–æ –±—É–¥–µ—Ç —Å–∏–ª—å–Ω–æ –∑–∞–±–∏–≤–∞—Ç—å –ø–∞–º—è—Ç—å.  
–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∫–∞—Ä—Ç–∞ –±—É–¥–µ—Ç 100*100 —è—á–µ–µ–∫, —Ç–æ –ø—Ä–∏–¥–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —Ö–æ–¥–µ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤ –ø–∞–º—è—Ç—å 10.000 —Å–ø—Ä–∞–π—Ç–æ–≤
```java
public void printMap(WorldMap worldMap) {
  
  for (int i = 0; i < height; i++) {
    for (int j = 0; j < width; j++) {
       grid[i][j] = "‚¨ú"; <-- —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ
    }
  }

  for (Map.Entry<Position, Entity> entry : worldMap.getOccupancy().entrySet()) {
    //—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ
   }

  for (int i = 0; i < height; i++) {
    for (int j = 0; j < width; j++) {
       //–ø–µ—á–∞—Ç—å
    }
  }
}
```

–ü–µ—á–∞—Ç–∞–π –∫–∞—Ä—Ç—É –ø–æ —Ö–æ–¥—É –µ–µ —á—Ç–µ–Ω–∏—è:
```java
public void printMap(WorldMap worldMap) {
  for (int y = 0; y < height; y++) {
    for (int x = 0; x < width; x++) {
       Position position = new Position(x, y);
       if(worldMap.isSquareEmpty(position)) {
        System.out.print(EMPTY_SPRITE);
       } else {
        Sprite sprite = worldMap.get(position).getSymbol();
        System.out.print(sprite);
       }
    }
    System.out.println();
  }
}
```

- –°–ø—Ä–∞–π—Ç—ã —Å—É—â–µ—Å—Ç–≤ –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –∑–¥–µ—Å—å, –∞ –Ω–µ –±—Ä–∞—Ç—å—Å—è –∏–∑ —Å–∞–º–∏—Ö —Å—É—â–µ—Å—Ç–≤.

–ò —Ç—É—Ç —Ç—ã –∑–∞–¥–∞—à—å –≤–æ–ø—Ä–æ—Å:  
–¢–∞–∫ –µ—Å–ª–∏ —Å–ø—Ä–∞–π—Ç—ã —Å—É—â–µ—Å—Ç–≤ —Ö—Ä–∞–Ω–∏—Ç—å –∑–¥–µ—Å—å, –∞ –Ω–µ –≤ —Å–∞–º–∏—Ö —Å—É—â–µ—Å—Ç–≤–∞—Ö, —Ç–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å—É—â–µ—Å—Ç–≤–∞ –≤ –ø—Ä–æ–µ–∫—Ç, –ø—Ä–∏–¥–µ—Ç—Å—è –∏–∑–º–µ–Ω—è—Ç—å —ç—Ç–æ—Ç –∫–ª–∞—Å—Å.  
–ó–Ω–∞—á–∏—Ç –ª–∏ —ç—Ç–æ, —á—Ç–æ –∫–ª–∞—Å—Å –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ —Ç–µ–º —Å–∞–º—ã–º –Ω–∞—Ä—É—à–∞–µ—Ç OCP?

–î–∞, –∫–ª–∞—Å—Å –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ç–æ–º —Å–º—ã—Å–ª–µ, —á—Ç–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –ø—Ä–æ–µ–∫—Ç –Ω–æ–≤–æ–≥–æ —Å—É—â–µ—Å—Ç–≤–∞ Bird, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤ —Ä–µ–Ω–¥–µ—Ä–µ—Ä –≤–Ω–µ—Å–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ- –¥–æ–±–∞–≤–∏—Ç—å —Å–ø—Ä–∞–π—Ç –¥–ª—è Bird.  

–ù–æ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –Ω–æ—Ä–º- –µ–¥–∏–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –†–µ–Ω–¥–µ—Ä–µ—Ä–∞ –∫–∞–∫ —Ä–∞–∑ –∏ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –ø–µ—á–∞—Ç–∞—Ç—å –∫–∞—Ä—Ç—É.  
–ê –¥–ª—è —ç—Ç–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–µ—Ä –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å –≤—Å–µ, —á—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è —Ä–∞—Å–ø–µ—á–∞—Ç–∫–∏, –≤ —Ç–æ–º —á–∏—Å–ª–µ- –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤.  
SRP –≥–ª–∞—Å–∏—Ç: "–£ –∫–ª–∞—Å—Å–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è". –ó–¥–µ—Å—å —ç—Ç–∞ –ø—Ä–∏—á–∏–Ω–∞- –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª–∞.

–°–ø—Ä–∞–π—Ç—ã —Å—É—â–µ—Å—Ç–≤ –Ω–µ–ª—å–∑—è —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å–∞–º–æ–º —Å—É—â–µ—Å—Ç–≤–µ –ø–æ—Ç–æ–º—É, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ä–µ–¥—ã, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤–æ.  
–ù–æ –≥–¥–µ-—Ç–æ —Å–ø—Ä–∞–π—Ç—ã —Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞–¥–æ. –ü–æ—ç—Ç–æ–º—É —Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞–¥–æ –≤ —Ç–æ–º –∫–ª–∞—Å—Å–µ, –∫–æ—Ç–æ—Ä—ã–π –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º.  
–¢–æ –µ—Å—Ç—å, –∑–¥–µ—Å—å.

–î–ª—è –æ—Ç—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è —ç—Ç–æ–≥–æ –ø—É–Ω–∫—Ç–∞, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ:  
–°–æ–∑–¥–∞—Ç—å –¥–≤–∞ Main'–∞. –û–¥–∏–Ω –∏–∑ –Ω–∏—Ö –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é, –≥–¥–µ —Å—É—â–µ—Å—Ç–≤–∞ –Ω–∞ –∫–∞—Ä—Ç–µ –±—É–¥—É—Ç –∏–∑–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –≤–∏–¥–µ —ç–º–æ–¥–∑–∏.  
–ê –≤—Ç–æ—Ä–æ–π –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é, –≥–¥–µ —Å—É—â–µ—Å—Ç–≤–∞ –Ω–∞ –∫–∞—Ä—Ç–µ –±—É–¥—É—Ç –∏–∑–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –≤–∏–¥–µ –±—É–∫–≤: P - predator, r - rock –∏ —Ç.–¥., –∞ –∑–µ–º–ª—è- —Ç–æ—á–∫–æ–π.  
–¢–æ–≥–¥–∞ —Å—Ç–∞–Ω–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å–ø—Ä–∞–π—Ç—ã –≤ —Å–∞–º–∏—Ö —Å—É—â–µ—Å—Ç–≤–∞—Ö- –Ω–µ –≤–∞—Ä–∏–∞–Ω—Ç. 

**18. class Simulation**

- –ù–∞—Ä—É—à–µ–Ω–∏–µ DI. –ö–ª–∞—Å—Å –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º —Å–µ–±—è. 
–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∫–ª–∞—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–∞–º —Å–µ–±—è —Ç–µ–º, —á—Ç–æ —Å–∞–º —Å–æ–∑–¥–∞–µ—Ç –∫–∞—Ä—Ç—É, –∞ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –µ–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
```java
public class Simulation {
  private final WorldMap map = new WorldMap(10, 10);
  //...
}
```
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–≥—Ä–æ–≤—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏.  
*–ú–∞—Ä—Ç–∏–Ω, "–ß–ö", –≥–ª.11, "–û—Ç–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –æ—Ç –µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"*

- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç–∫—à–µ–Ω–æ–≤.

–≠–∫—à–µ–Ω—ã –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ —á–µ—Ä–µ–∑ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º. 
–ò–¥–µ—è —ç–∫—à–µ–Ω–æ–≤ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã—Å—Ç—Ä–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –¥–æ–±–∞–≤–ª—è—è/—É–¥–∞–ª—è—è —ç–∫—à–µ–Ω—ã.
–ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ —ç–∫—à–µ–Ω –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–º—É —É—Å–ª–æ–≤–∏—é, –∑–Ω–∞—á–∏—Ç –µ–≥–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —É—Å–ª–æ–≤–∏–µ –ø—Ä–æ–≤–µ—Ä—è–ª–æ—Å—å –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–≥–æ —ç–∫—à–µ–Ω–∞
```java
public void nextTurn() {
  moveAllCreaturesAction.execute(map);
  if (map.numberOfEntityOfType(Grass.class) < 1) {
    new SpawnAction(Grass::new, 5).execute(map);
  }
  if (map.numberOfEntityOfType(Predator.class) < 1) {
    new SpawnAction(() -> new Predator(10, 1, 1), 5).execute(map);
  }
  //...
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
private final static int RESPAWN_LEVEL = 0;

private final List<Action> turnActions = List.of(
  new MoveAllCreaturesAction(),
  new RespawnAction(Grass.class, RESPAWN_LEVEL, Grass::new, 5),
  new RespawnAction(Tree.class,  RESPAWN_LEVEL, Tree::new, 5),
  //...  
);

public void nextTurn() {
  for(Action action : turnActions) {
    action.execute(map);
  }
  //...
}
```

- –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞
```java
new SpawnAction(() -> new Predator(10, 1, 1), 5).execute(map);
```

- –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç init —ç–∫—à–µ–Ω—ã, –æ–Ω –∏—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç. –í—ã–ø–æ–ª–Ω—è—Ç—å init —ç–∫—à–µ–Ω—ã –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ
```java
private void initSpawnActions() {
  new SpawnAction(Grass::new, 5).execute(map);
  new SpawnAction(Tree::new, 5).execute(map);
  //...
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
public class Simulation {

private final List<Action> initActions = List.of(
    new SpawnAction(Grass::new, 5),
    new SpawnAction(Tree::new, 5),
    //...  
  );

  public class Simulation(WorldMap map, ...) {
    this.map = map;
    //...
    executeActions(initActions);
  }

  private void executeActions(List<Action> actions) {
    for(Action action : actions) {
      action.execute(map);
    }
  }
}
```

**19. class Main**, —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ main

üëç –¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –°–∏–º—É–ª—è—Ü–∏—é, —ç—Ç–æ —Ö–æ—Ä–æ—à–æ.

## –í–´–í–û–î

–í —Ü–µ–ª–æ–º, –∑–∞–º–µ—á–∞–Ω–∏–π –º–µ–Ω—å—à–µ, —á–µ–º –æ–±—ã—á–Ω–æ.  
–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–æ–ª–∏–∫–∏ –ù–µ–º—á–∏–Ω—Å–∫–æ–≥–æ –ø—Ä–æ SOLID.

n.117(265)  
#—Ä–µ–≤—å—é #—Å–∏–º—É–ª—è—Ü–∏—è 