https://github.com/JavaThugNGG/simulation-game-csharp  
[–°–∞–±–∞–∫–∞]

–ü—Ä–æ–µ–∫—Ç –Ω–∞ C#, —Ä–µ–≤—å—é –Ω–∞ –ø—Ä–∞–≤–∞—Ö –æ–±—â–µ–π —ç—Ä—É–¥–∏—Ü–∏–∏.

–ï—Å—Ç—å –Ω–∞–¥ —á–µ–º –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å.

## –ù–ï–î–û–°–¢–ê–¢–ö–ò –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

–ü–æ—á–µ–º—É-—Ç–æ –Ω–µ –≤–∏–¥–Ω–æ –∫–∞—Ä—Ç–∏–Ω–æ–∫  
![pic](https://github.com/raketareview/simulation_review/blob/master/content/resources/rev-sim099/img0.png)

## –•–û–†–û–®–û

+ üëç –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–∞—É–∑–∞/–ø—É—Å–∫ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã

## –ó–ê–ú–ï–ß–ê–ù–ò–Ø

**1. –ù–µ–π–º–∏–Ω–≥**

- –≠—Ç–æ –Ω–µ –º–µ–Ω–µ–¥–∂–µ—Ä 
```
class SimulationManager

//–¢–£–¢ –ü–†–ê–í–ò–õ–¨–ù–û:
class Simulation
```
–ú–µ–Ω–µ–¥–∂–µ—Ä–æ–º —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –±—ã–ª –±—ã, –µ—Å–ª–∏ –±—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –∫–ª–∞—Å—Å "Simulation". –¢–æ–≥–¥–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å "SimulationManager", –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∞–ª –±—ã –Ω–µ–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Simulation.
–ó–¥–µ—Å—å —Ç–∞–∫–æ–π –ø–∞—Ä—ã –∫–ª–∞—Å—Å–æ–≤ –Ω–µ—Ç, –ø–æ—ç—Ç–æ–º—É –ø–æ—Å—Ç—Ñ–∏–∫—Å "Manager" –Ω–µ –∏–º–µ–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ —Å–º—ã—Å–ª–∞.

–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ø–∏—Å–æ–∫ —Ç–∏–ø–∞ "Manager" –∏ "Helper" –º–Ω–æ–≥–æ –æ–±—Å—É–∂–¥–∞–µ—Ç—Å—è –≤ —Å–µ—Ç–∏, [–Ω–∞–ø—Ä–∏–º–µ—Ä —Ç—É—Ç](https://gist.github.com/hurricane-voronin/9ceccace0fd530bbf17c83b059c86eb7).
*.NET –û–±—â–∏–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –æ–± –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏*  
*–ü—Ä–∞–≤–∏–ª–∞ –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –æ–± –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ C#*  
*–ú–∞—Ä—Ç–∏–Ω, "–ß–∏—Å—Ç—ã–π –∫–æ–¥", –≥–ª.2*  
*–Æ—Ç—É–±, –ù–µ–º—á–∏–Ω—Å–∫–∏–π "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –º–µ—Ç–æ–¥—ã –∏ –∫–ª–∞—Å—Å—ã?"*

**2. –ù–∞—Ä—É—à–µ–Ω–∏–µ DRY**, –º–∞–≥–∏—á–µ—Å–∫–∏–µ –±—É–∫–≤—ã, —á–∏—Å–ª–∞, —Å–ª–æ–≤–∞. –í–≤–æ–¥–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
```
Console.WriteLine("1 - –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏");
Console.WriteLine("2 - –ü–∞—É–∑–∞");
Console.WriteLine("3 - –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å");
case 1:  //...
case 2:  //...
case 3:  //...
if (choice is >= 1 and <= 3)
Console.WriteLine("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 3.");

//–ü–†–ê–í–ò–õ–¨–ù–û:
private const int Start = 1;
private const int Pause = 2;
private const int Continue = 3;

Console.WriteLine($"{Start} - –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏");
Console.WriteLine($"{Pause} - –ü–∞—É–∑–∞");
Console.WriteLine($"{Continue} - –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å");
case Start:  //...
case Pause:  //...
case Continue:  //...
if (choice is >= Start and <= Continue)
Console.WriteLine($"–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç {Start} –¥–æ {Continue}.");
```
*–§–∞—É–ª–µ—Ä, "–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥", –≥–ª.8, "–ó–∞–º–µ–Ω–∞ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —á–∏—Å–ª–∞ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π"*  
*refactoring.guru "–ó–∞–º–µ–Ω–∞ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —á–∏—Å–ª–∞ —Å–∏–º–≤–æ–ª—å–Ω–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π"* 

**3. –ï—Å–ª–∏ –≤ –±–ª–æ–∫–µ if –µ—Å—Ç—å return**(break, continue, throw, exit –∏ —Ç.–¥.), —Ç–æ else –Ω–µ –ø–∏—à–µ—Ç—Å—è.  
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–µ–≤–∞–∂–Ω–æ, –±—É–¥–µ—Ç else –∏–ª–∏ –Ω–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ –∏ –∫–æ–¥ –±–µ–∑ `else` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —á–∏—Ç–∞–±–µ–ª—å–Ω–µ–π
```
if (_map.TryGetValue(neighbor, out Entity? entity))
{
  //...  
  return false;
}
else
{
  return true;
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
if (_map.TryGetValue(neighbor, out Entity? entity))
{
  //...  
  return false;
}
return true;
```

**4. record Coordinates(int Row, int Column)**

üëç –ù–µ—Ç –Ω–∏—á–µ–≥–æ –ª–∏—à–Ω–µ–≥–æ, —ç—Ç–æ —Ö–æ—Ä–æ—à–æ. Record –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã- –∏–¥–µ–∞–ª—å–Ω–æ.
```
internal record Coordinates(int Row, int Column) : IComparable<Coordinates>
{
  public override string ToString() => $"{Row} {Column}";
  public int CompareTo(Coordinates? other) => (Row, Column).CompareTo((other!.Row, other.Column));
}
```

**5. –ö–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç- –ö–∞—Ä—Ç–∞**

–í –¢–ó —É–∫–∞–∑–∞–Ω –∫–ª–∞—Å—Å `Map`, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ–º —Å—É—â–Ω–æ—Å—Ç–∏ –ö–∞—Ä—Ç–∞(–î–æ—Å–∫–∞) –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤.  
–í —ç—Ç–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∞–∫–æ–≥–æ –∫–ª–∞—Å—Å–∞ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ. 
–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞, –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `IDictionary<Coordinates, Entity>`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –º–µ–∂–¥—É –º–µ—Ç–æ–¥–∞–º–∏ –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Å–æ–≤.
–ù–∞–ø—Ä–∏–º–µ—Ä, —á–∞—Å—Ç—å –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç—Ç–∏–º `IDictionary` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–ª–∞—Å—Å–µ `MapController`.

–ü—Ä–æ–±–ª–µ–º–∞, –æ–¥–Ω–∞–∫–æ, —Å–æ—Å—Ç–æ—è–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –æ—Ç —ç—Ç–æ–≥–æ —Å—É—â–Ω–æ—Å—Ç—å –ö–∞—Ä—Ç–∞ –Ω–∏–∫—É–¥–∞ –Ω–µ –¥–µ–ª–∞—Å—å –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞.  
–ü—Ä–æ—Å—Ç–æ –æ–Ω–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –≤ –≤–∏–¥–µ –∑–∞–ø—á–∞—Å—Ç–µ–π –ø–æ –≤—Å–µ–º—É –ø—Ä–æ–µ–∫—Ç—É:
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç—Ç–æ–π —Å—É—â–Ω–æ—Å—Ç—å—é –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–ª–∞—Å—Å–µ `MapController`
- –†–∞–∑–º–µ—Ä—ã –≤ –≤–∏–¥–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–ª–∞—Å—Å–µ `SimulationManager` etc.

**6. class MapController**, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–ø–∏—Å—è–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞-—Å—É—â–µ—Å—Ç–≤–æ –∏–∑ `IDictionary<Coordinates, Entity>`

- –ü–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç. 

–°—É–¥—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –º–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω —Ç–æ–ª—å–∫–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∫–∞—Ä—Ç—É —Å—É—â–µ—Å—Ç–≤–∞–º–∏ –∏–∑ —Å–ø–∏—Å–∫–∞
```
private void FillMap(IList<Entity> generatedEntities)
{
  foreach (Entity entity in generatedEntities)
  {
    Coordinates entityCoordinates = entity.Coordinates;
    _map[entityCoordinates] = entity;
    if (entity is Creature creature)
    {
     creature.Moved += OnCreatureMoved;
    }
  }
}
```
–ù–æ –∫—Ä–æ–º–µ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ(event) –∫—Ä–µ–∞—Ç—É—Ä–∞–º –∏–∑ —ç—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞.
–ú–µ—Ç–æ–¥ –Ω—É–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∑–∞–¥–∞—á—É.  
*–ú–∞—Ä—Ç–∏–Ω "–ß–∏—Å—Ç—ã–π –∫–æ–¥", –≥–ª.3, "–ò–∑–±–∞–≤—å—Ç–µ—Å—å –æ—Ç –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤"*  
*–§–∞—É–ª–µ—Ä "–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥", –≥–ª.6, "–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞"*  

- –ï—Å–ª–∏ –±—ã —ç—Ç–æ –±—ã–ª –ø—Ä–æ—Å—Ç–æ –∫–ª–∞—Å—Å-–≤–æ–ø–ª–æ—â–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ "–ö–∞—Ä—Ç–∞", —è –±—ã —Å–∫–∞–∑–∞–ª, —á—Ç–æ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –Ω–∞—Ä—É—à–∞–µ—Ç SRP
```
private void OnCreatureMoved(object sender, Coordinates oldCoordinates, Coordinates newCoordinates)
{
  _map[newCoordinates] = (Entity)sender;
  _map.Remove(oldCoordinates);
}
```
–ê —Ç–∞–∫ –¥–∞–∂–µ –∏ –Ω–µ –∑–Ω–∞—é- –Ω–∞—Å—Ç–æ–ª—å–∫–æ —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –∑–∞–≥–∞–¥–æ—á–µ–Ω.

**7. class Menu**

- –ù–∞—Ä—É—à–µ–Ω–∏–µ DRY. –î–≤–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞
```
Console.WriteLine("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –í–≤–µ–¥–∏—Ç–µ —Ü–∏—Ñ—Ä—É –æ—Ç 1 –¥–æ 3!");
```
–í—ã–Ω–µ—Å–∏ —ç—Ç–æ—Ç –∫–æ–¥ –≤–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä `void writeFailCommandMessage()` –∏ –≤ —ç—Ç–∏—Ö –¥–≤—É—Ö —Å—Ç—Ä–æ–∫–∞—Ö –≤—ã–∑—ã–≤–∞–π –¥–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥.

- –ù–µ—Ç —Å–º—ã—Å–ª–∞ –¥–µ–ª–∞—Ç—å –¥–≤–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –¥–∏–∞–ø–∞–∑–æ–Ω —á–∏—Å–ª–∞ 1-3 –≤ –º–µ—Ç–æ–¥–∞—Ö `int GetValidChoice()` –∏ `void RunMenu()`.
–û—Å—Ç–∞–≤—å —ç—Ç—É –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–æ–ª—å–∫–æ –≤ `RunMenu()`.

**8. class PathFinder**

- –ù–∞—Ä—É—à–µ–Ω–∏–µ SRP. 

–ö–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ –∏—Å–∫–∞—Ç—å –ø—É—Ç—å –æ—Ç —Ç–æ—á–∫–∏ —Å—Ç–∞—Ä—Ç–∞ –¥–æ —Ç–æ—á–∫–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∑–∞–¥–∞–Ω–Ω—ã–º —É—Å–ª–æ–≤–∏—è–º —Å–æ–≥–ª–∞—Å–Ω–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É BFS –∏–ª–∏ AStar. 
–≠—Ç–∏ —É—Å–ª–æ–≤–∏—è –∫–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤ —Å–µ–±—è –∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —ç—Ç–∏ —É—Å–ª–æ–≤–∏—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø—É—Ç–µ–º –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ Creature —Ç–æ–º—É –∏–ª–∏ –∏–Ω–æ–º—É –≤–∏–¥—É —Å—É—â–µ—Å—Ç–≤
```
internal List<Coordinates> FindPathToVictim(Creature creature)
{
  if (creature is Predator)
  {
    return FindPathToGoal(typeof(Herbivore));
  }
  if (creature is Herbivore)
  {
    return FindPathToGoal(typeof(Grass));
  }
  return new List<Coordinates>();
}
```
–ú–µ—Ç–æ–¥ –ø–æ–∏—Å–∫–∞ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–µ –∫—Ä–µ–∞—Ç—É—Ä—É, –≤ –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç –≤–µ—Å—Ç–∏—Å—å –ø–æ–∏—Å–∫.
–ê –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–∏—Å–∫–∞.  
–ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫:
```
internal List<Coordinates> Find(IDictionary<Coordinates, Entity> map, Coordinates start, Type target) {
  //–∏—â–µ—Ç –ø—É—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ –æ—Ç —Ç–æ—á–∫–∏ start
  //–¥–æ —Ç–æ—á–∫–∏, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ –Ω—É–∂–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞(entity.GetType() == target)
}
```

- –ù–∞—Ä—É—à–µ–Ω–∏–µ SRP, —á—É–∂–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –æ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.

–ú–æ–¥–µ–ª—å(–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø–æ –ø–æ–∏—Å–∫—É –ø—É—Ç–∏ —ç—Ç–æ –º–æ–¥–µ–ª—å) –Ω–µ –¥–æ–ª–∂–Ω–∞ –Ω–∏—á–µ–≥–æ –ø–µ—á–∞—Ç–∞—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å
```
Console.WriteLine($"–ü—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Å—É—â–µ—Å—Ç–≤–∞ –≤ –º–µ—Ç–æ–¥–µ {nameof(IsValidMove)} –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞!");
```
–ò–Ω–∞—á–µ –º–æ–¥–µ–ª—å –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç –±—ã—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–∞—Ç–æ—á–µ–Ω–Ω–æ–π –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ä–µ–¥—É –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–µ–±—è –≤ —ç—Ç–æ–π —Å—Ä–µ–¥–µ- –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –∫–æ–Ω—Å–æ–ª—å.
–í –¥—Ä—É–≥–∏—Ö —Å—Ä–µ–¥–∞—Ö –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å –∫–æ–¥ –≤ —ç—Ç–æ–º –∫–ª–∞—Å—Å–µ, —á—Ç–æ–±—ã –≤—ã–≤–æ–¥ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–ª—Å—è –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º —ç—Ç–æ–π —Å—Ä–µ–¥—ã, —Ç–æ –µ—Å—Ç—å, —ç—Ç–æ –ª–∏—à–Ω—è—è –ø—Ä–∏—á–∏–Ω–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª–∞—Å—Å–∞.
–í –¥—Ä—É–≥–∏—Ö —Å—Ä–µ–¥–∞—Ö(–Ω–∞–ø—Ä. –ê–Ω–¥—Ä–æ–∏–¥) —ç—Ç—É –º–æ–¥–µ–ª—å –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å- –æ–Ω–∞ —Ç–∞–º –ø—Ä–æ—Å—Ç–æ –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è. 
–î—Ä—É–≥–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –º–æ–¥–µ–ª–∏(–Ω–∞–ø—Ä. –µ—Å–ª–∏ –æ–¥–Ω—É –∏ —Ç—É –∂–µ –º–æ–¥–µ–ª—å –Ω—É–∂–Ω–æ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –ø–æ–∫–∞–∑–≤–∞—Ç—å –ø–æ-—Ä–∞–∑–Ω–æ–º—É) –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç —Å–¥–µ–ª–∞—Ç—å, –∏–ª–∏ –ø—Ä–∏–¥–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ –∫–æ—Å—Ç—ã–ª—å.

–î–∞–≤–∞–π —Ä–∞–∑–±–∏—Ä–µ–º—Å—è –ø–æ —Å—É—Ç–∏ –∫–µ–π—Å–∞.
–ò—Ç–∞–∫ –µ—Å–ª–∏ –≤ –º–µ—Ç–æ–¥ `IsValidMove(Coordinates neighbor, Type goalType)` –ø–µ—Ä–µ–¥–∞–Ω –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `Type goalType` —Ç–æ —ç—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º–∞.
–ü–æ—Ç–æ–º—É —á—Ç–æ –≤  

**9. abstract class Entity**

- –°–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É. –ù–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ —Ç–æ–º—É —Å—É—â–µ—Å—Ç–≤—É, –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ–¥–∏—Ç. 
–ü–æ—ç—Ç–æ–º—É entities –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞—è —Å —É—Ä–æ–≤–Ω—è `Creature`.

- –ù–∞—Ä—É—à–µ–Ω–∏–µ SRP, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –æ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è- —Å—É—â–µ—Å—Ç–≤–æ —Ö—Ä–∞–Ω–∏—Ç —Å–ø—Ä–∞–π—Ç —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
```
internal string Figure { get; init; }
```
–ú–æ–¥–µ–ª—å(–∞ —ç—Ç–æ –º–æ–¥–µ–ª—å) –Ω–µ –¥–æ–ª–∂–Ω–∞ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏ –∑–Ω–∞—Ç—å, –∫–∞–∫ –µ–µ –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —é–∑–µ—Ä—É.

- ToString() –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º, —Ç–æ –µ—Å—Ç—å –ø–µ—Ä–µ—á–∏—Å–ª—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π, –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.
–ó–¥–µ—Å—å –≤—Å–µ —Å–µ–º–µ–π—Å—Ç–≤–æ `Entity` –æ–±—Ä–µ—á–µ–Ω–æ —á–µ—Ä–µ–∑ `ToString()` –≤—ã–≤–æ–¥–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è- Figure
```
public override string ToString() => Figure;
```
ToString() –Ω–µ –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –ø—Ä–µ–¥–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã—Ö –∫–ª–∞—Å—Å–æ–≤, –≤—Ä–æ–¥–µ PhoneNumber.
–£ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ —ç–Ω—Ç–∏—Ç–∏, —Ç–∞–∫–∏—Ö –∫–∞–∫ `Creature` –∏ –µ–≥–æ –ø–æ—Ç–æ–º–∫–∏, –º–Ω–æ–≥–æ –∑–Ω–∞—á–∏–º—ã—Ö –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏–ª–æ –±—ã –≤—ã–≤–æ–¥–∏—Ç—å –≤ ToString().

**10. abstract class Creature : Entity**

- –í–æ—Ç —ç—Ç–∏ –≤—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã —Ç–æ–ª—å–∫–æ —É—Å–ª–æ–∂–Ω–∞—é—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –∏ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –ö—Ä–µ–∞—Ç—É—Ä–æ–π –∏ –ö–∞—Ä—Ç–æ–π.
–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ –Ω–æ—Ä–º–∞–ª—å–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥ –¥–ª—è —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ö–æ–¥–∞
```
internal delegate void MoveHandler(object sender, Coordinates oldCoordinates, Coordinates newCoordinates);
internal event MoveHandler Moved;
//...
internal void MakeMove(Coordinates newCoordinates)
{
  Coordinates oldCoordinates = Coordinates;
  Coordinates = newCoordinates;
  OnMove(oldCoordinates, newCoordinates);
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
{
  Coordinates oldCoordinates = Coordinates;
  Coordinates = newCoordinates;
  //—É–¥–∞–ª–∏—Ç—å —Å–µ–±—è –∏–∑ –∫–∞—Ä—Ç—ã –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–µ oldCoordinates
  //–≤—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±—è –≤ –∫–∞—Ä—Ç—É –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–µ newCoordinates
}
```

- –ú–µ—Ç–æ–¥ —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ö–æ–¥–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –Ω–∞ –Ω–µ–µ –ø–µ—Ä–µ–π—Ç–∏
```
void MakeMove(Coordinates newCoordinates)
```

–ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ö–æ–¥–∞ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –ª–∏–±–æ –≤ –ö—Ä–µ–∞—Ç—É—Ä–µ –≤ –º–µ—Ç–æ–¥–µ `MakeMove(...)`, –ª–∏–±–æ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–º –∫–ª–∞—Å—Å–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ú—É–≤–µ—Ä–µ.

–ï—Å–ª–∏ –∞–ª–≥–æ—Ä–∏—Ç–º –¥–≤–∏–∂–µ–Ω–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–º –ú—É–≤–µ—Ä–µ, —Ç–æ–≥–¥–∞ –ö—Ä–µ–∞—Ç—É—Ä–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–∏—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ —Å—É—â–Ω–æ—Å—Ç—å, –ª–∏—à–µ–Ω–Ω–∞—è —Å–≤–æ–µ–π –≤–æ–ª–∏- –µ–µ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –≤–Ω–µ—à–Ω—è—è —Å–∏–ª–∞.
–¢–∏–ø–∞, —Ñ–∏–≥—É—Ä–∞ –≤ —à–∞—Ö–º–∞—Ç–∞—Ö, –∫–æ—Ç–æ—Ä—É—é –¥–≤–∏–≥–∞–µ—Ç –∏–≥—Ä–æ–∫.  
–≠—Ç–æ –≤–ø–æ–ª–Ω–µ –Ω–æ—Ä–º, –Ω–æ —Ç–æ–≥–¥–∞ `Creature` –≤–æ–æ–±—â–µ –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤ —Å–µ–±–µ –º–µ—Ç–æ–¥ `MakeMove(...)`.

–ï—Å–ª–∏ –∂–µ –ö—Ä–µ–∞—Ç—É—Ä–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–∏—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ —Å—É—â–Ω–æ—Å—Ç—å —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–ª–µ–π, —Ç–æ–≥–¥–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ –æ —Ç–æ–º, –∫—É–¥–∞ –∏ –∫–∞–∫ —Ö–æ–¥–∏—Ç—å, –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–Ω–∞.
–ò –≤—Å—è —ç—Ç–∞ –ª–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –º–µ—Ç–æ–¥–µ `MakeMove(...)`. –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –∫–ª–∞—Å—Å—ã –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –≤—ã–∑—ã–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥, —Ç–æ –µ—Å—Ç—å –¥–∞–≤–∞—Ç—å –ø–∏–Ω–∫–∞ –∫—Ä–µ–∞—Ç—É—Ä–µ, —á—Ç–æ–±—ã –æ–Ω–∞ –ø–æ–±–µ–∂–∞–ª–∞.

–ò –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–µ—Ç–æ–¥ `MakeMove(...)` –¥–æ–ª–∂–µ–Ω –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤ —Å–µ–±—è –∫–æ–Ω–µ—á–Ω—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É —Ö–æ–¥–∞. 
–ê —Å–∞–º –≤ —Å–µ–±–µ –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥ –ø–æ–∏—Å–∫–∞ –∏ –Ω–∞–π—Ç–∏ –ø—É—Ç—å –∫ –µ–¥–µ, –∞ –ø–æ—Ç–æ–º –ø—Ä–æ–π—Ç–∏ –ø–æ —ç—Ç–æ–º—É –ø—É—Ç–∏.

**11. –ü–∞–∫–µ—Ç Commands**

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ "–ö–æ–º–∞–Ω–¥–∞": –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ICommand` –∏ –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
–í—Ä–æ–¥–µ, –≤—Å–µ –æ–∫ üëç 

**12. –ü–∞–∫–µ—Ç Actions**

- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫—à–µ–Ω–æ–≤ –≤ —ç—Ç–æ–º –ø–∞–∫–µ—Ç–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¢–ó.

–î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IAction` –∏ –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ –æ–¥–Ω–æ–º—É –ø—É–±–ª–∏—á–Ω–æ–º—É –º–µ—Ç–æ–¥—É.
–í—Å–µ —ç—Ç–∏ —ç–∫—à–µ–Ω—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º. –ê —ç—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, –µ—Å–ª–∏ –º–µ–∂–¥—É –Ω–∏–º–∏ –Ω–µ –±—É–¥–µ—Ç —Ä–æ–¥—Å—Ç–≤–∞ –ø–æ –ª–∏–Ω–∏–∏ –æ–±—â–µ–≥–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—â–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

–í–æ—Ç –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–≤–∞ "—ç–∫—à–µ–Ω–∞", –æ–¥–∏–Ω –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –¥–≤–∏–≥–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤, –∞ –¥—Ä—É–≥–æ–π –∑–∞—Å–µ–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤ –Ω–∞ –∫–∞—Ä—Ç—É. –û–Ω–∏ –Ω–∏–∫–æ–∏–º –æ–±—Ä–∞–∑–æ–º –Ω–µ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏
```
internal class MoveCreaturesAction {...}
internal abstract class PlantSpawnAction {...}
```

- –ù–∞—Ä—É—à–µ–Ω–∏–µ DRY. –ö—É—á–∞ –∫–ª–∞—Å—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ- –∑–∞—Å–µ–ª—è—é—Ç –Ω–∞ –∫–∞—Ä—Ç—É —Å—É—â–µ—Å—Ç–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞
```
abstract class CreatureSpawnAction
class GrassSpawnAction : PlantSpawnAction
class HerbivoreSpawnAction : CreatureSpawnAction
class PredatorSpawnAction : CreatureSpawnAction
class TreeSpawnAction : PlantSpawnAction
```
–í–Ω—É—Ç—Ä–∏ —ç—Ç–∏—Ö –∫–ª–∞—Å—Å–æ–≤- —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–æ–¥.

–ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–ø–∞–≤–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–ø–∞–≤–Ω–∏—Ç—å –≤ –∫–∞—Ä—Ç—É –ª—é–±—ã—Ö —Å—É—â–µ—Å—Ç–≤.

**13. class Launcher**

–û—Ç–∫—É–¥–∞ —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –∑–Ω–∞–µ—Ç –ø—Ä–æ —Ü–∏—Ñ—Ä—ã 1-3? 
```
Console.WriteLine("–°–∏–º—É–ª—è—Ü–∏—è –∑–∞–∫–æ–Ω—á–µ–Ω–∞! –í–≤–µ–¥–∏—Ç–µ —Ü–∏—Ñ—Ä—É –æ—Ç 1 –¥–æ 3 –¥–ª—è –≤—ã—Ö–æ–¥–∞");
```
–≠—Ç–∏ —Ü–∏—Ñ—Ä—ã –∑–Ω–∞–µ—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ `class Menu`.

**14. class WorldPrinter**

- –í —Ü–∏–∫–ª–∞—Ö —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ–±—É–∫–≤–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã. –ù–æ –∏–Ω–æ–≥–¥–∞ —ç—Ç–æ –æ–±—ä–µ–∫—Ç–∏–≤–Ω–æ —Ö—É–∂–µ
```
for (int i = 0; i < SimulationManager.WorldRows; i++)
{
  for (int j = 0; j < SimulationManager.WorldColumns; j++)
  {
    Coordinates coordinate = new Coordinates(i, j);
  }
}

//–õ–£–ß–®–ï:
for (int row = 0; row < SimulationManager.WorldRows; row++)
{
  for (int column = 0; column < SimulationManager.WorldColumns; column++)
  {
    Coordinates coordinate = new Coordinates(row, column);
  }
}
```

- –°–ø—Ä–∞–π—Ç—ã —Å—É—â–µ—Å—Ç–≤ —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å–µ–±–µ, –∞ –Ω–µ –±—Ä–∞—Ç—å –∏–∑ Entity.

**15. class SimulationManager**

- –ù–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –æ—Å–Ω–æ–≤–∞–Ω–∏–π –¥–µ–ª–∞—Ç—å –∫–∞—Ä—Ç—É —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
```
internal static readonly int WorldRows = 10;
internal static readonly int WorldColumns = 20;
```
–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å —É —à–∞—Ö–º–∞—Ç–Ω–æ–π –¥–æ—Å–∫–∏(8x8) –∏–ª–∏ –∏–≥—Ä—ã –∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏(3x3).  
–ó–¥–µ—Å—å —Ä–∞–∑–º–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Ä—Ç—É –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤.

- –¢–∞–∫ –∫–∞–∫ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞—Ä—É—à–µ–Ω–∞ –∏–¥–µ—è `Action` –∏–∑ –¢–ó, —Ç–æ –≤—Å–µ —Ç.–Ω. "—ç–∫—à–µ–Ω—ã" –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–µ —á–µ—Ä–µ–∑ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º, –∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ
```
private readonly IList<CreatureSpawnAction> _creatureInitActions = new List<CreatureSpawnAction>();
private readonly IList<PlantSpawnAction> _plantInitActions = new List<PlantSpawnAction>();
private readonly IList<MoveCreaturesAction> _turnActions = new List<MoveCreaturesAction>();

foreach (PlantSpawnAction action in _plantInitActions)
{
  action.Perform(_map, _generatedEntities);
}

foreach (CreatureSpawnAction action in _creatureInitActions)
{
  action.Perform(_map, _generatedEntities);
}
```
–í—Å–µ —ç–∫—à–µ–Ω—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ISimAction`(–Ω–∞–∑–≤–∞–Ω–∏–µ `IAction` –Ω–µ –ø–æ–¥–æ–π–¥–µ—Ç- –±—É–¥–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü–∞ —Å–æ —Å—Ç–∞–Ω–¥. C# –∫–ª–∞—Å—Å–æ–º `Action`) –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ —á–µ—Ä–µ–∑ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º.  
–ü—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:
```
private readonly IList<ISimAction> _initActions = new List<ISimAction> {
  new UnoAction(),
};

private readonly IList<ISimAction> _turnActions = new List<ISimAction> {
  new DosAction(),
  new TresAction(),
  new MoveAction(),
};

//...
performActions(_initActions);  //–í–´–ü–û–õ–ù–ò–¢–¨ –î–ï–ô–°–¢–í–ò–Ø –°–¢–ê–†–¢–û–í–´–• –≠–ö–®–ï–ù–û–í
performActions(_turnActions);  //–í–´–ü–û–õ–ù–ò–¢–¨ –î–ï–ô–°–¢–í–ò–Ø –≠–ö–®–ï–ù–û–í –ù–ê –ö–ê–ñ–î–û–ú –•–û–î–ï

internal void performActions(IList<ISimAction> actions) { 
 foreach(ISimAction a in actions) {
   a.perform( /*–∫–∞—Ä—Ç–∞*/ );
 }
}
```

## –í–´–í–û–î

–ù–µ –≤–∏–¥–Ω–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞- —ç–∫—à–µ–Ω—ã –ª–∏—à–µ–Ω—ã —Ä–æ–¥—Å—Ç–≤–∞.

–° –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π —Ç–æ–∂–µ –Ω–µ –≤—Å–µ –æ–∫- –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–ª–∞—Å—Å –ö–∞—Ä—Ç—ã.    
–î–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –û–û–ü –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–æ–ª–∏–∫–∏ –°–µ—Ä–≥–µ—è –ø—Ä–æ —à–∞—Ö–º–∞—Ç—ã.  
–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–æ–ª–∏–∫–∏ –ù–µ–º—á–∏–Ω—Å–∫–æ–≥–æ –ø—Ä–æ SOLID.

–≠—Ç–∞ —Å–∏–º—É–ª—è—Ü–∏—è –Ω–∞ —à–∞—Ä–ø–µ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –Ω–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç [–≤–µ—Ä—Å–∏–∏ –Ω–∞ java](https://github.com/JavaThugNGG/simulation-game).  
–í–∏–¥–∏–º–æ, –ª–∏–±–æ —è —Ç–µ–±—è –Ω–µ —Ä–µ–≤—å—é—Ä–∏–ª, –ª–∏–±–æ —Ç—ã –Ω–µ –ø—Ä–æ–≤–µ–ª —Ä–∞–±–æ—Ç—É –Ω–∞–¥ –æ—à–∏–±–∫–∞–º–∏.

n.103(232)  
#—Ä–µ–≤—å—é #—Å–∏–º—É–ª—è—Ü–∏—è #csharp 