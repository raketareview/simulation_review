https://github.com/xcvqqz/TheRealSimulation  
[Maxim M]

ะััั ะฝะฐะด ัะตะผ ะฟะพัะฐะฑะพัะฐัั.

## ะะะะะกะขะะขะะ ะะะะะะะะฆะะ

ะะพ ะฒัะตะผั ัะฐะฑะพัั ัะธะผัะปััะธะธ ะฟัะธะผะตัะฝะพ ะฐะฑัะพะปััะฝะพ ะฝะตะฒะพะทะผะพะถะฝะพ ะฒะฒะตััะธ ะบะพะผะฐะฝะดั, ะฝะฐะฟัะธะผะตั "stop". 
ะะพัะพะผั ััะพ ะฟะพะบะฐ ะฑัะดะตัั ะฝะฐะฑะธัะฐัั, ะฒ ะบะพะฝัะพะปั ะฒัะฒะตะดะตั ะพัะตัะตะดะฝัั ัะฐัะฟะตัะฐัะบั ะบะฐััั ะธ ะฒะฒะพะด ัะพะฑัะตััั
```
Commands: 
[start] - begin simulation 
[pause] - pause simulation 
[resume] - resume paused simuation 
[stop] - stop simulation completely  
[exit] - quit program
```
ะะพั ะทะดะตัั ั ััะฟะตะป ะฒะฒะตััะธ ัะพะปัะบะพ ะฟะตัะฒัะต ะดะฒะต ะฑัะบะฒั("st") ะบะพะผะฐะฝะดั
```
st-------- Turn: 5 ---------
โฐ๏ธ๐ซ๐ฟ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ
๐ซ๐ซ๐ซ๐บ๐ซ๐ซ๐ซ๐ซ๐ซโฐ๏ธ๐ซ๐ซ
๐ซ๐ซ๐ฆ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ
๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ
๐ฟ๐ซ๐ฆ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ
๐ซ๐ซ๐ซ๐ซ๐ซ๐ฆ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ
๐ซ๐ซ๐ซ๐ซ๐ซ๐ณ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ
๐ซ๐ซ๐ซ๐ณ๐ซ๐ณ๐ซ๐ซโฐ๏ธ๐ซ๐ซ๐ซ
๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ
๐ซ๐ซโฐ๏ธ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ
๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซโฐ๏ธ
๐ซ๐ฟ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ซ๐ณโฐ๏ธ๐ซ
```
ะัะพััะพ ัะดะตะปะฐะน ะบะพะผะฐะฝะดั ะดะปะธะฝะพะน ะฒ 1 ัะธะผะฒะพะป.

## ะฅะะะะจะ

+ ๐ ะกะฟัะฐะนัั ัััะตััะฒ ะฝะต ััะฐะฝัััั ะฒ ัะฐะผะธั ัััะตััะฒะฐั
+ ๐ ะะพะพัะดะธะฝะฐัั ัััะตััะฒ ะฝะต ััะฐะฝัััั ะฒ ัะฐะผะธั ัััะตััะฒะฐั(ะผะฝะต ัะฐะบ ะฑะพะปััะต ะฝัะฐะฒะธััั)

## ะะะะะงะะะะฏ

**1. ะะตะนะผะธะฝะณ**

- ะะฐะทะฒะฐะฝะธั ะฟะฐะบะตัะพะฒ ะฟะธััััั ััะธะปะตะผ lower_snake
```
gameUtils

//ะะะะะะะฌะะ:
game_utils
```

- ะะฐะท ะตััั "ัะธัะธะฝะฐ", ัะพ ะดะพะปะถะฝะฐ ะฑััั ะธ "ะฒััะพัะฐ"
```
public class GameBoard {
  private final int length;
  private final int width;
  //...
}

//ะะะะะะะฌะะ:
public class GameBoard {
  private final int height();
  private final int width;
  //...
}
```

- ะะทะปะธัะฝะธะน ะบะพะฝัะตะบัั. ะะท ัะธะณะฝะฐัััั ะธ ัะฐะบ ะฟะพะฝััะฝะพ, ััะพ ะตะฝัะธัะธ ะฒะพะทะฒัะฐัะฐะตััั ะฟะพ ะบะพะพัะดะธะฝะฐัะต
```
public Entity getEntityAt(Coordinates coordinates)

//ะะะะะะะฌะะ:
public Entity getEntity(Coordinates coordinates)
```

- ะ ะฝะฐะทะฒะฐะฝะธะธ ะฟะตัะตะผะตะฝะฝัั ะฝะต ะฟะธัะธ ัะธะฟ ะดะฐะฝะฝัั, ะบ ะบะพัะพััะผ ะพะฝะธ ะพัะฝะพัะธััั. ะ ะฒะพะพะฑัะต ะฝะต ัะฟะพััะตะฑะปัะน ะฒะตะฝะณะตััะบัั ะฝะพััะฐัะธั.  
ะะฐะทะฒะฐะฝะธะต ะฟะตัะตะผะตะฝะฝะพะน ะดะพะปะถะฝะพ ะพัะฒะตัะฐัั ะฝะฐ ะฒะพะฟัะพั ััะพ ััะฐะฝะธั ะฟะตัะตะผะตะฝะฝะฐั, ะฐ ะฝะต ะบะฐะบ ััะฐะฝะธั
```
private ArrayList<Entity> entityList;

//ะะะะะะะฌะะ:
private ArrayList<Entity> entities;
```

*Oracle Java code conventions, part."Naming conventions"*  
*ะะฐััะธะฝ, "ะงะธัััะน ะบะพะด", ะณะป.2*  
*ะฎััะฑ, ะะตะผัะธะฝัะบะธะน "ะะฐะบ ะฝะฐะทัะฒะฐัั ะฟะตัะตะผะตะฝะฝัะต, ะผะตัะพะดั ะธ ะบะปะฐััั?"*  

**2. ะัะฟะพะปัะทัะน ะบะปะฐััั ัะตัะตะท ะธั ะธะฝัะตััะตะนัั**
```
HashMap<Coordinates, Entity> entities = new HashMap<>();
HashMap<Coordinates, Entity> getEntities()
ArrayList<Coordinates> visitedPath;

//ะะะะะะะฌะะ:
Map<Coordinates, Entity> entities = new HashMap<>();
Map<Coordinates, Entity> getEntities()
List<Coordinates> visitedPath;
```

**3. ะกะปะธัะบะพะผ ะดะปะธะฝะฝัะต ะบะพะฝััััะบัะธะธ**, ะบะพัะพััะต ัััะดะฝะพ ะฟะพะฝััั.

ะัะธะพัะธัะตั- ะฟัะพััะพัะฐ ะธ ะฟะพะฝััะฝะพััั ะบะพะดะฐ, ะฐ ะฝะต ัะบะพะฝะพะผะธั ัััะพัะตะบ. ะะฒะพะดะธ ะฟะพััะฝัััะธะต ะฟะตัะตะผะตะฝะฝัะต
```
List<Coordinates> pathToFood = new PathFinder(gameBoard).searchFood(gameBoard.getCoordinates(this), Grass.class);

//ะะะะะะะฌะะ:
PathFinder pathFinder = new PathFinder(gameBoard);
Coordinates start = gameBoard.getCoordinates(this);
List<Coordinates> pathToFood = pathFinder.searchFood(start, Grass.class);
```
*ะคะฐัะปะตั, "ะะตัะฐะบัะพัะธะฝะณ", ะณะป.6, "ะะฒะตะดะตะฝะธะต ะฟะพััะฝัััะตะน ะฟะตัะตะผะตะฝะฝะพะน".*

**4. ะะฐัััะตะฝะธะต ะบะพะฝะฒะตะฝัะธะธ ะบะพะดะฐ.** ะ ะปัะฑะพะน ัะธััะฐัะธะธ ะฒัะดะตะปัะน ัะตะปะพ ะฑะปะพะบะฐ ัะบะพะฑะพัะบะฐะผะธ, ะดะฐะถะต ะตัะปะธ ัะตะปะพ ัะพััะพะธั ะธะท ะพะดะฝะพะน ัััะพะบะธ. 
ะัะบะปััะตะฝะธะต- ะผะตัะพะด equals(), ัะฐะผ ะผะพะถะฝะพ ะฟะพัะปะต if ะฝะต ะฒัะดะตะปััั ะฑะปะพะบะธ ัะบะพะฑะพัะบะฐะผะธ
```
if (herbivore == null) return;

//ะะะะะะะฌะะ:
if (herbivore == null) {
  return;
}
```

**5. ะะฐัััะตะฝะธะต DRY**, ะผะฐะณะธัะตัะบะธะต ะฑัะบะฒั, ัะธัะปะฐ, ัะปะพะฒะฐ. ะะฒะพะดะธ ะบะพะฝััะฐะฝัั. ะ ะตัะปะธ ะพะฝะธ ัะถะต ะตััั- ะฟะพะปัะทัะนัั
```
public static final String START = "start";
public static final String PAUSE = "pause";
public static final String RESUME = "resume";

public static final String START_MENU_INFO_MESSAGE = 
    "\nCommands: \n[start] - begin simulation" +
    " \n[pause] - pause simulation" +
    " \n[resume] - resume paused simuation" + ...

//ะะะะะะะฌะะ:
public static final String START_MENU_INFO_MESSAGE = 
    "\nCommands: \n[%s] - begin simulation".formatted(START) +
    " \n[%s] - pause simulation".formatted(PAUSE) +
    " \n[%s] - resume paused simuation".formatted(RESUME) + ...
```
*ะคะฐัะปะตั, "ะะตัะฐะบัะพัะธะฝะณ", ะณะป.8, "ะะฐะผะตะฝะฐ ะผะฐะณะธัะตัะบะพะณะพ ัะธัะปะฐ ัะธะผะฒะพะปะธัะตัะบะพะน ะบะพะฝััะฐะฝัะพะน" *  
*refactoring.guru "ะะฐะผะตะฝะฐ ะผะฐะณะธัะตัะบะพะณะพ ัะธัะปะฐ ัะธะผะฒะพะปัะฝะพะน ะบะพะฝััะฐะฝัะพะน"*  

**6. ะัะธะพัะธัะตั- ัะธัะฐะตะผะพััั ะบะพะดะฐ**, ะฐ ะฝะต ัะบะพะฝะพะผะธั ัััะพัะตะบ
```
System.out.println(STOPPED_INFO_MESSAGE + "\n" + RESTART_INFO_MESSAGE);

//ะะะะะะะฌะะ:
System.out.println(STOPPED_INFO_MESSAGE);
System.out.println(RESTART_INFO_MESSAGE);
```

**7. ะะฐะบะตั gameUtils**

ะ ะฟะฐะบะตัะต ะฝะตั ะฝะธ ะพะดะฝะพะน ััะธะปะธัั. ะัะณะปะธ, ััะพ ะฒ ัะฒะต ะฟะพะฝะธะผะฐะตััั ะฟะพะด ััะธะปะธัะฝัะผ ะบะปะฐััะพะผ.

**8. record Coordinates(int column, int row)**

๐ ะะตั ะฝะธัะตะณะพ ะปะธัะฝะตะณะพ, ััะพ ัะพัะพัะพ. Record ะดะปั ะบะพะพัะดะธะฝะฐัั- ะธะดะตะฐะปัะฝะพ.

**9. class Constants**

- ะะพะฝััะฐะฝัะฝัะน ะบะปะฐัั ะทะดะตัั *ะธะฝะพะณะดะฐ* ะธัะฟะพะปัะทัะตััั ะฝะตะฟัะฐะฒะธะปัะฝะพ- ะดััะณะธะต ะบะปะฐััั ะฝะฐะฟััะผัั ะปะตะทัั ะฒ ะบะพะฝััะฐะฝัั ะฒะผะตััะพ ัะพะณะพ, ััะพะฑั ะฟะพะปััะฐัั ะฝะตะพะฑัะพะดะธะผัะต ััะธะผ ะบะปะฐััะฐะผ ะดะฐะฝะฝัะต ะฒ ัะฒะพะน ะบะพะฝััััะบัะพั.
ะญัะพ ะดะตะปะฐะตั ะบะปะฐััั ะฝะตัะฝะธะฒะตััะฐะปัะฝัะผะธ ะธ ะทะฐะฒะธัะธะผัะผะธ ะพั ะบะปะฐััะฐ ะบะพะฝััะฐะฝั.  

ะฃัะปะพะฒะฝัะน ะฟัะธะผะตั
```
public final class Settings {
  //ะฟัะธะฒะฐัะฝัะน ะบะพะฝััััะบัะพั
  public static final int HOUSE_ROOMS = 5;
}

/ะะะะฅะ:
public static void main(String[] args) {
  House house = new House();
  //oth code
}

public class House {
  private final int rooms;

  public House() {
    this.rooms = Settings.HOUSE_ROOMS;
  }

  public int getRooms() {
    return rooms;
  }
}

//ะฅะะะะจะ:
public static void main(String[] args) {
  House house = new House(Settings.HOUSE_ROOMS);
  //oth code
}

public class House {
  private final int rooms;

  public House(int rooms) {
    this.rooms = rooms;
  }

  public int getRooms() {
    return rooms;
  }
}
```
ะัะพ ะบะปะฐััั ะบะพะฝััะฐะฝั, ะบะพะฝัะธะณััะฐัะธะธ ะธ ะธั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ั ะฟะธัะฐะป [ััั](https://t.me/zhukovsd_it_chat/53243/176984)

- ะัะฟะพะปัะทัะน ะผะฝะพะณะพัััะพัะฝัะต ัััะพะบะธ
```
public static final String START_MENU_INFO_MESSAGE = "\nCommands: \n[start] - begin simulation" +
    " \n[pause] - pause simulation" + ...

//ะะะะะะะฌะะ:
public static final String START_MENU_INFO_MESSAGE = """
      Commands: \n[start] - begin simulation
      [pause] - pause simulation
      ...
    """;
```

**10. class GameBoard**, ะบะฐััะฐ

- ะะพะฝััะฐะฝัะฝัะน ะบะปะฐัั ะทะดะตัั ะธัะฟะพะปัะทัะตััั ะฝะตะฟัะฐะฒะธะปัะฝะพ, ัะธัะธะฝั ะธ ะฒััะพัั `GameBoard` ะดะพะปะถะตะฝ ะฟะพะปััะฐัั ะฒ ะบะพะฝััััะบัะพั
```
public GameBoard() {
  this.length = Constants.GAMEBOARD_LENGTH;
  this.width = Constants.GAMEBOARD_WIDTH;
}

//ะะะะะะะฌะะ:
public GameBoard(int length, int width) {
  this.length = length;
  this.width = width;
}
```

- ะะธะบะพะณะดะฐ ะฝะต ะฒะพะทะฒัะฐัะฐะน null
```
private final HashMap<Coordinates, Entity> entities = new HashMap<>();

public Entity getEntityAt(Coordinates coordinates) {
  return getEntities().get(coordinates);  //ะผะพะถะตั ะฒะตัะฝััั null
}
```
ะะพะทะฒัะฐั null ะฟะพะฒััะฐะตั ัะธัะบ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธั NullPointerException ะฒ ะฟัะพะณัะฐะผะผะต.  
*ะะฐััะธะฝ, "ะงะธัััะน ะบะพะด", ะณะป.7.7-8*  
*ะฎััะฑ, ะะตะผัะธะฝัะบะธะน "ะะพัะตะผั ะฝะตะปัะทั ะฒะพะทะฒัะฐัะฐัั NULL?"*  

- ะัะธ ะฒัะตั ะพะฟะตัะฐัะธัั ั ััะฐััะธะตะผ ะบะพะพัะดะธะฝะฐัั(ะดะพะฑะฐะฒะธัั, ะฒัะดะฐัั, ัะดะฐะปะธัั ะธ ั.ะด.), ะฝัะถะฝะพ ะฟัะพะฒะตัััั ะบะพะพัะดะธะฝะฐัั ะฝะฐ ะบะพััะตะบัะฝะพััั. 
ะัะปะธ ะบะพะพัะดะธะฝะฐัะฐ ะฝะตะบะพััะตะบัะฝะฐ(ะฝะฐัะพะดะธััั ะฒะฝะต ะฟัะตะดะตะปะพะฒ ะบะฐััั), ะฝัะถะฝะพ ะฑัะพัะฐัั ะธัะบะปััะตะฝะธะต
```
public Entity getEntityAt(Coordinates coordinates) {
  return getEntities().get(coordinates);
}
```

- ะะฐัััะตะฝะธะต SRP, ะผะตัะพะดั ััะถะธั ะพัะฒะตัััะฒะตะฝะฝะพััะตะน. 

ะะฐััะฐ ะดะพะปะถะฝะฐ ัะพะปัะบะพ ััะฐะฝะธัั ัััะตััะฒะฐ ะธ ะพะฑะตัะฟะตัะธัั ะฑะฐะทะพะฒัะต ะพะฟะตัะฐัะธะธ ั ะฝะธะผะธ: ะฒััะฐะฒะธัั, ะฒัะดะฐัั ะพะดะฝะพ ัััะตััะฒะพ ะธ ัะฟะธัะพะบ ะฒัะตั ััะฐะฝะธะผัั ัััะตััะฒ, ัะดะฐะปะธัั.
ะัะปะธ ะบะฐะบะพะน-ัะพ ะผะตัะพะด ะฝะต ะฝัะถะตะฝ ะดะปั ะพะฑะตัะฟะตัะตะฝะธั ััะพะณะพ ััะฝะบัะธะพะฝะฐะปะฐ, ะทะฝะฐัะธั ะพะฝ ะฝะต ะฟัะธะฝะฐะดะปะตะถะธั ะบ ะพัะฒะตัััะฒะตะฝะฝะพััะธ ะบะฐััั, ะฐ ะฟัะธะฝะฐะดะปะตะถะธั ะบ ััะถะพะน ะพัะฒะตัััะฒะตะฝะฝะพััะธ.
ะะดะตัั ะผะตัะพะดั ััะถะธั ะพัะฒะตัััะฒะตะฝะฝะพััะตะน: ะฒัะดะฐัั ัะปััะฐะนะฝัั ะฟััััั ะบะพะพัะดะธะฝะฐัั.

ะะฐะฒะตัะฝะพะต, ะดะปั ะฟัะพะตะบัะฐ ะฒ ัะตะปะพะผ ะฟะพะปะตะทะฝะพ ะธะผะตัั ะผะตัะพะด, ะบะพัะพััะน ะฒัะดะฐะตั ัะปััะฐะนะฝัั ะฟััััั ะบะพะพัะดะธะฝะฐัั. 
ะะพ ััะพั ะฟัะพัะตัั ะฝะต ะธะผะตะตั ะฝะธะบะฐะบะพะณะพ ะพัะฝะพัะตะฝะธั ะบ ะตะดะธะฝะพะน ะพัะฒะตัััะฒะตะฝะฝะพััะธ ะบะฐััั- ััะฐะฝะตะฝะธั ัััะตััะฒ ะฒ ัะตะฑะต.  
ะะปั ะพัะณะฐะฝะธะทะฐัะธะธ ััะฐะฝะตะฝะธั/ัะดะฐะปะตะฝะธั/ะฒัะดะฐัะธ ัััะตััะฒ, ะบะฐััะต ะฝะต ะฝัะถะฝะพ ะณะตะฝะตัะธัะพะฒะฐัั ัะปััะฐะนะฝัั ะบะพะพัะดะธะฝะฐัั.  

ะะตัะพะดั ััะถะธั ะพัะฒะตัััะฒะตะฝะฝะพััะตะน ะดะพะปะถะฝั ะฝะฐัะพะดะธัััั ะฒ ัะตั ะบะปะฐััะฐั, ะฒ ะธะฝัะตัะตัะฐั ะบะพัะพััั ะพะฝะธ ัะฐะฑะพัะฐัั.
ะัะปะธ ะพะดะธะฝ ะธ ัะพั ะถะต ะผะตัะพะด ะธัะฟะพะปัะทััั ัะฐะทะฝัะต ะบะปะฐััั, ัะพ ะผะตัะพะด ะฝัะถะฝะพ ะฒัะฝะตััะธ ะฒ ะพัะดะตะปัะฝัะน ะบะปะฐัั, ะฝะฐะฟัะธะผะตั, BoardUtils.

- ะะฐัััะตะฝะธะต ะธะฝะบะฐะฟััะปััะธะธ, ะบะปะฐัั ะฟัะตะดะพััะฐะฒะปัะตั ะบะปะธะตะฝััะบะพะผั ะบะพะดั ะฟะพะดัะพะฑะฝะพััะธ ะฒะฝัััะตะฝะฝะตะณะพ ััััะพะนััะฒะฐ ะธ ะดะพัััะฟ ะบ ะฝะตะผั
```
private final HashMap<Coordinates, Entity> entities = new HashMap<>();

public HashMap<Coordinates, Entity> getEntities() {
  return entities;
}
```
ะ ะดะฐะฝะฝัะน ะผะพะผะตะฝั ะบะปะธะตะฝััะบะธะน ะบะพะด ะผะพะถะตั ะฒัะฟะพะปะฝััั ะปัะฑัะต ะพะฟะตัะฐัะธะธ ั HashMap ะะฐััั ะฝะฐะฟััะผัั, ะธะณะฝะพัะธััั ะดะพะฟัััะธะผัะต ะบะฐััะพะน ัะฟะพัะพะฑั. 
ะะฐะฟัะธะผะตั ัะฐะบ
```
ะะฐััะฐ ะบะฐััะฐ = new ะะฐััะฐ(100, 100);
//ะทะฐัะตะปะธัั ะบะฐััั ัััะตััะฒะฐะผะธ
ะบะฐััะฐ.getEntities().clear(); //ะณะตะฝะพัะธะด- ัะดะฐะปะตะฝะธะต ะธะท ะบะฐััั ะฒัะตั ัััะตััะฒ, ะผะธะฝัั ะดะพะทะฒะพะปะตะฝะฝัะต ะบะฐััะพะน ะผะตัะฐะฝะธะทะผั
```
ะะท-ะทะฐ ััะพะณะพ ะบะปะฐัั ัะฒะปัะตััั ะณะธะฑัะธะดะพะผ ัะพ ะฒัะตะผะธ ะฒััะตะบะฐััะธะผะธ ะฟะพัะปะตะดััะฒะธัะผะธ: *"ะงะธัััะน ะบะพะด", ะณะป.6* 

- ะะฐัััะตะฝะธะต SRP, ะพััััััะฒัะตั ะผะตัะพะด ัะดะฐะปะตะฝะธั ัััะตััะฒะฐ ะธะท ะบะฐััั.

ะัะตะฒะธะดะฝะพ, ััะพ ะดะปั ัะฐะฑะพัั ะฟัะพะณัะฐะผะผั, ะฒ ะบะฐััั ะฝัะถะฝะพ ะดะพะฑะฐะฒะปััั ัััะตััะฒ ะธ ัะดะฐะปััั ะธะท ะฝะตะต. 
ะะดะตัั ะถะต ะผะตัะพะด ะดะพะฑะฐะฒะปะตะฝะธั ะฒ ะบะฐััะต ะตััั, ะฐ ะผะตัะพะดะฐ ัะดะฐะปะตะฝะธั ะฒ ะบะฐััะต ะฝะตั ะฝะตั. 
ะกะปะตะดะพะฒะฐัะตะปัะฝะพ, ัะดะฐะปะตะฝะธะต ะดะตะปะฐะตั ะบัะพ-ัะพ ะดััะณะพะน(Predator ะธ ะฟัะพั.). 

ะะพ ะดะตะปะฐะตั ััะพ ะฝะฐะฟััะผัั, ะฟะพะปััะฐั ะธะท ะบะฐััั ะตะต ะฒะฝัััะตะฝะฝะพััะธ ัะตัะตะท `getEntities()`. 
ะขะฐะบะธะผ ะพะฑัะฐะทะพะผ, ััะธ ะบะปะฐััั ะทะฐะฑะธัะฐัั ัะฐััั ะพัะฒะตัััะฒะตะฝะฝะพััะธ ะบะฐััั ัะตะฑะต.

ะะตัะพะดั ะฒััะฐะฒะบะธ ะธ ัะดะฐะปะตะฝะธั ัััะตััะฒะฐ ะดะพะปะถะฝั ะฝะฐัะพะดะธัััั ะฒ ะบะปะฐััะต ะบะฐััั.

**11. class PathFinder**

- ะะพะฟะพะปะฝะธัะตะปัะฝะพะต ะฟะฐัะฐะผะตััะธะทะธัะพะฒะฐะฝะธะต ััั ะฝะต ะดะฐะตั ะฝะธะบะฐะบะธั ะฒัะณะพะด, ะฝะพ ะดะตะปะฐะตั ัะธะณะฝะฐัััั ะฑะพะปะตะต ัะปะพะถะฝะพะน ะธ ะฝะตะฟะพะฝััะฝะพะน
```
public <T extends Entity> List<Coordinates> searchFood(Coordinates start, Class<T> typeOfFood)

//ะะฃะงะจะ:
public List<Coordinates> searchFood(Coordinates start, Class<T extends Entity> typeOfFood)
```

- ะะทะฑััะพัะฝะพ. ะะต ะฝัะถะฝะพ ะบะฐะถะดัะน ัะฐะท ะฟะตัะตัะพะทะดะฐะฒะฐัั ััะพั ะผะฐััะธะฒ, ะฐ ะพะฝ ะฟะตัะตัะพะทะดะฐะตััั ะบะฐะถะดัะน ัะฐะท ะฟัะธ ะฒัะทะพะฒะต ะผะตัะพะดะฐ. ะกะดะตะปะฐะน ะตะณะพ ะบะพะฝััะฐะฝัะพะน
```
private Coordinates[] getShiftDirections() {
  return new Coordinates[]{
      new Coordinates(-1, 0),
      new Coordinates(1, 0),
      new Coordinates(0, -1),
      new Coordinates(0, 1)
  };
}

//ะะะะะะะฌะะ:
private static final Coordinates[] SHIFT_COORDINATES = { new Coordinates(-1, 0), ...};
```

**12. abstract class Entity** ะธ ะตะณะพ "ััะฐัะธัะฝัะต" ะฝะฐัะปะตะดะฝะธะบะธ

๐ ะะพัะผ.

**13. abstract class Creature extends Entity**

ะะท ััะธั ััะตั ะผะตัะพะดะพะฒ ัะพะปัะบะพ ะพะดะธะฝ ะดะพะปะถะตะฝ ะฑััั ะฟัะฑะปะธัะฝัะผ- `makeMove(...)`
```
public abstract void makeMove(GameBoard gameBoard);
public abstract void attackFood(GameBoard gameBoard, Coordinates coordinates);
public abstract void moveCreature(GameBoard gameBoard, Coordinates from, Coordinates to);
```
ะััะฐะปัะฝัะต ะผะตัะพะดั ัะฒะปััััั ะฟะพะดัะพะฑะฝะพัััะผะธ ะฒะฝัััะตะฝะฝะตะน ะผะตัะฐะฝะธะบะธ ะฟะตัะตะผะตัะตะฝะธั ัััะตััะฒ ะธ ัะฐะฑะพัะฐัั ะฒ ะธะฝัะตัะตัะฐั `makeMove(...)`. 
ะ ะฟะพัะพะผั ะดะพะปะถะฝั ะฑััั *ะฒ ะดะฐะฝะฝะพะผ ัะปััะฐะต* protected.

**14. class Herbivore/Predator extends Creature**

- ะะฐัััะตะฝะธะต DRY. ะะฑัะพะปััะฝะพ ะพะดะธะฝะฐะบะพะฒะฐั ัะตะฐะปะธะทะฐัะธั `moveCreature(...)`. 
ะัะพััะพ ะฒัะฝะตัะธ ััะพั ะพะฑัะธะน ะบะพะด ะฒ ะฟัะตะดะบะฐ.

- ะะฐัััะตะฝะธะต DRY. ะะตัะพะด `makeMove(...)` ัะพะถะต ะฑะตะท ัััะดะฐ ะผะพะถะฝะพ ัะดะตะปะฐัั ะพะฑัะธะผ ะธ ะฒัะฝะตััะธ ะฒ ะฟัะตะดะบะฐ
```
public class Predator extends Creature {
  //...  
  @Override
  public void makeMove(GameBoard gameBoard) {
    List<Coordinates> pathToFood = new PathFinder(gameBoard).searchFood(gameBoard.getCoordinates(this), Herbivore.class);
    if (!pathToFood.isEmpty()) {
      moveAlongPath(gameBoard, pathToFood);
    }
  }
}

//ะะะะะะะฌะะ:
public abstract class Creature extends Entity {
  //...
  public void makeMove(GameBoard gameBoard) {
    PathFinder pathFinder = new PathFinder(gameBoard);
    Coordinates start = gameBoard.getCoordinates(this);
    List<Coordinates> pathToFood = pathFinder.searchFood(start, getFood());

    if (!pathToFood.isEmpty()) {
      moveAlongPath(gameBoard, pathToFood);
    }
  }
  protected Class<? extends Entity> getFood();
}    
```

**15. class SpawnAction extends Action**

ะกะฝะพะฒะฐ ะฟะตัะตะผัะดัะธะป ั ัะธะณะฝะฐัััะพะน
```
private <T extends Entity> Entity createEntity(Class<T> typeOfEntity)

//ะะะะะะะฌะะ:
private Entity createEntity(Class<<T extends Entity>> typeOfEntity)
```

- ะะฐัััะตะฝะธะต DRY
```
entityList.add(createEntity(Grass.class));
entityList.add(createEntity(Grass.class));
//ะตัะต ะผะธะปะปะธะพะฝ ัะฐะบะธั ะถะต ัััะพะบ

entityList.add(createEntity(Tree.class));
entityList.add(createEntity(Tree.class));
//ะตัะต ะผะธะปะปะธะพะฝ ัะฐะบะธั ะถะต ัััะพะบ

//ะะะะะะะฌะะ:
spawn(Grass.class, GRASS_AMOUNT);
spawn(Tree.class, TREE_AMOUNT);

private void spawn(Class<T extends Entity> clazz, int amount) {
  for(int i = 0; i < amount, i++) {
    Entity entity = createEntity(clazz);
    entityList.add(entity);
  }
}
```

**16. class MapConsoleRenderer**

ะ ะบะพะฝัะต ัะตะฟะพัะบะธ if'ะพะฒ' ะฝัะถะฝะพ ะบะธะดะฐัั ะธัะบะปััะตะฝะธะต- ะทะฝะฐัะธั ะฒ ะบะฐััะต ะตััั ัััะตััะฒะพ, ัะฟัะฐะนั ะบะพัะพัะพะณะพ ะผั ะฝะต ะทะฝะฐะตะผ. 
ะะพัะพะผั ััะพ ะฟัะธ ะดะพะฑะฐะฒะปะตะฝะธะธ ะฝะพะฒะพะณะพ ัััะตััะฒะฐ ะฒ ะฟัะพะตะบั, ะผะพะถะฝะพ ะทะฐะฑััั ะดะพะฑะฐะฒะธัั ะตะณะพ ัะฟัะฐะนั ะฒ ัะฐัะฟะตัะฐัะบั.
ะ ัะพะณะดะฐ ัััะตััะฒะพ ะฑัะดะตั ะถะธัั ะฝะฐ ะบะฐััะต ัะฒะพะตะน ะถะธะทะฝัั, ะฝะพ ะผั ััะพะณะพ ะฝะต ัะฒะธะดะธะผ- ะฒะผะตััะพ ััะพะณะพ ัััะตััะฒะฐ ะฑัะดะตั ัะฐัะฟะตัะฐััะฒะฐัััั ะดะตัะพะปัะฝัะน ัะฟัะฐะนั
```
private String colorizeAndGetSprite(Coordinates coordinates) {
  Entity entity = gameBoard.getEntities().get(coordinates);
  if (entity instanceof Herbivore) {
    return HERBIVORE;
  }
  if (entity instanceof Grass) {
    return GRASS;
  }
  //...
  return GROUND;
}

//ะะะะะะะฌะะ:
private String getSprite(Entity entity) {
  if (entity instanceof Herbivore) {
    return HERBIVORE;
  }
  if (entity instanceof Grass) {
    return GRASS;
  }
  //...
  throw new IllegalArgumentException("illegal entity: " + entity);
}
```

**17. class Simulation**

๐ ะัะธะฝะธะผะฐะตั ะดะพััะฐัะพัะฝะพะต ะบะพะปะธัะตััะฒะพ ะทะฐะฒะธัะธะผะพััะตะน ะฒ ะบะพะฝััััะบัะพั. ะ ะดะฐะฝะฝะพะผ ัะปััะฐะต- ะบะฐััั
```
public Simulation(GameBoard gameBoard)
```

**18. class Main**, ัะพะดะตัะถะธั ัะพัะบั ะฒัะพะดะฐ main

๐ ะขะพะปัะบะพ ัะพะทะดะฐะตั ะธ ะทะฐะฟััะบะฐะตั ะกะธะผัะปััะธั, ััะพ ัะพัะพัะพ.

## ะะซะะะ

ะะปั ะปัััะตะณะพ ะฟะพะฝะธะผะฐะฝะธั ะดะตะบะพะผะฟะพะทะธัะธะธ ะะะ ะฟะพัะผะพััะตัั ัะพะปะธะบะธ ะกะตัะณะตั ะฟัะพ ัะฐัะผะฐัั. ะะพัะผะพััะตัั ัะพะปะธะบะธ ะะตะผัะธะฝัะบะพะณะพ ะฟัะพ SOLID.

n.83(187)  
#ัะตะฒัั #ัะธะผัะปััะธั 