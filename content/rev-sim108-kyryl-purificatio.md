https://github.com/purificatio/simulation  
[Kyryl]

–í —Ü–µ–ª–æ–º, –Ω–æ—Ä–º.

## –ù–ï–î–û–°–¢–ê–¢–ö–ò –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

1. –Ø –≤–≤–µ–ª –∫–∞—Ä—Ç—É 100*100 –∏ –∑–∞–ø—É—Å—Ç–∏–ª –±–µ—Å–∫–æ–Ω–µ—á–Ω—É—é —Å–∏–º—É–ª—è—Ü–∏—é- –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞–¥–æ–ª–≥–æ –∑–∞–¥—É–º–∞–ª–∞—Å—å
```
–í–≤–µ–¥–∏—Ç–µ –∂–µ–ª–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫: 100
–í–≤–µ–¥–∏—Ç–µ –∂–µ–ª–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫: 100
```
–í–≤–µ–¥–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–º–µ—Ä—ã –∫–∞—Ä—Ç—ã, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

## –•–û–†–û–®–û

+ üëç –°–ø—Ä–∞–π—Ç—ã —Å—É—â–µ—Å—Ç–≤ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Å–∞–º–∏—Ö —Å—É—â–µ—Å—Ç–≤–∞—Ö
+ üëç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å—É—â–µ—Å—Ç–≤ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Å–∞–º–∏—Ö —Å—É—â–µ—Å—Ç–≤–∞—Ö(–º–Ω–µ —Ç–∞–∫ –±–æ–ª—å—à–µ –Ω—Ä–∞–≤–∏—Ç—Å—è)
+ üëç –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–∞—É–∑–∞/–ø—É—Å–∫ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
+ üöÄ –ú–µ–Ω—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç —Ä–∞–∑–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

## –ó–ê–ú–ï–ß–ê–ù–ò–Ø

**1. –ù–µ–π–º–∏–Ω–≥**

- –ï—Å–ª–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å –∫–ª–∞—Å—Å `GameMap`, —Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å –∏–º–µ–Ω–µ–º, –≤–∫–ª—é—á–∞—é—â–∏–º —ç—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞, –ª–∏–±–æ —Ö—Ä–∞–Ω–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞
```
private final Map<Cell, Entity> cellEntityGameMap = new HashMap<>();
private final Map<Entity, Cell> entityCellGameMap = new HashMap<>();

//–ü–†–ê–í–ò–õ–¨–ù–û:
private final Map<Cell, Entity> cellWithEntities = new HashMap<>();
private final Map<Entity, Cell> entityWithCells = new HashMap<>();
```

- –ò–∑–±—ã—Ç–æ—á–Ω–æ
```
GameMap.mapHeight
GameMap.mapWidth

//–ü–†–ê–í–ò–õ–¨–ù–û:
GameMap.height
GameMap.width
```

- –≠—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –ø–æ—Ö–æ–∂–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `Supplier` –∏ –∫ —Ç–æ–º—É –∂–µ —è–≤–ª—è–µ—Ç—Å—è –≥–ª–∞–≥–æ–ª–æ–º. –ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏
```
class Supply
```

- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º
```
class EntityInitCreation

//–ü–†–ê–í–ò–õ–¨–ù–û:
class EntitySpawner
```

*Oracle Java code conventions, part."Naming conventions"*  
*–ú–∞—Ä—Ç–∏–Ω, "–ß–∏—Å—Ç—ã–π –∫–æ–¥", –≥–ª.2*  
*–Æ—Ç—É–±, –ù–µ–º—á–∏–Ω—Å–∫–∏–π "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –º–µ—Ç–æ–¥—ã –∏ –∫–ª–∞—Å—Å—ã?"*

**2. –ï—Å–ª–∏ –≤ –±–ª–æ–∫–µ if –µ—Å—Ç—å return**(break, continue, throw, exit –∏ —Ç.–¥.), —Ç–æ else –Ω–µ –ø–∏—à–µ—Ç—Å—è.  
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–µ–≤–∞–∂–Ω–æ, –±—É–¥–µ—Ç else –∏–ª–∏ –Ω–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ –∏ –∫–æ–¥ –±–µ–∑ `else` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —á–∏—Ç–∞–±–µ–ª—å–Ω–µ–π
```
if (firstDiff == secondDiff) {
 return (o1.equals(o2))
  ? 0
  : 1;
} else {
  return -1;
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
if (firstDiff == secondDiff) {
 return (o1.equals(o2))
  ? 0
  : 1;
} 
return -1;
```

**3. –ù–∞—Ä—É—à–µ–Ω–∏–µ DRY**, –º–∞–≥–∏—á–µ—Å–∫–∏–µ –±—É–∫–≤—ã, —á–∏—Å–ª–∞, —Å–ª–æ–≤–∞. –í–≤–æ–¥–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
```
public void startInfinitySimulation() {
  //...
  gameOutput.showMessage("–í–≤–µ–¥–∏—Ç–µ p —á—Ç–æ –±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—É—é —Å–∏–º—É–ª—è—Ü–∏—é: \n");
}

class Pause implements Runnable {
  //...
  if (!(Character.toLowerCase(userEntered) == 'p')) 
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
private final static char PAUSE = 'p';

public void startInfinitySimulation() {
  //...
  String message = "–í–≤–µ–¥–∏—Ç–µ '%c' —á—Ç–æ –±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—É—é —Å–∏–º—É–ª—è—Ü–∏—é: \n".formatted(PAUSE);
  gameOutput.showMessage(message);
}

class Pause implements Runnable {
  //...
  if (!(Character.toLowerCase(userEntered) == PAUSE)) 
}
```
*–§–∞—É–ª–µ—Ä, "–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥", –≥–ª.8, "–ó–∞–º–µ–Ω–∞ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —á–∏—Å–ª–∞ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π"*  
*refactoring.guru "–ó–∞–º–µ–Ω–∞ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —á–∏—Å–ª–∞ —Å–∏–º–≤–æ–ª—å–Ω–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π"*  

**4. record Cell(int row, int column)**

+ üëç –ù–µ—Ç –Ω–∏—á–µ–≥–æ –ª–∏—à–Ω–µ–≥–æ, —ç—Ç–æ —Ö–æ—Ä–æ—à–æ. Record –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã- –∏–¥–µ–∞–ª—å–Ω–æ.

+ üëç –•–æ—Ä–æ—à–æ, —á—Ç–æ –ø–æ–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è row –∏ column –∞ –Ω–µ x –∏ y. –ú–Ω–µ —Ç–∞–∫ –±–æ–ª—å—à–µ –Ω—Ä–∞–≤–∏—Ç—Å—è.  
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–µ—Ç, –∫–∞–∫ —á–∞—Å—Ç–æ –±—ã–≤–∞–µ—Ç, –ø—É—Ç–∞–Ω–∏—Ü—ã —Å –ø–æ—Ä—è–¥–∫–æ–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –≤ –º–∞—Å—Å–∏–≤–∞—Ö: –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞(x,y), –∞ –≤ –º–∞—Å—Å–∏–≤–∞—Ö –Ω–∞–æ–±–æ—Ä–æ—Ç- –º–∞—Å—Å–∏–≤[y, x].

**5. class GameMap**

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–≤–µ —Ö–µ—à–º–∞–ø—ã- –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã-—Å—É—â–µ—Å—Ç–≤–∞ –∏ —Å—É—â–µ—Å—Ç–≤–∞-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
```
private final Map<Cell, Entity> cellEntityGameMap = new HashMap<>();
private final Map<Entity, Cell> entityCellGameMap = new HashMap<>();
```
–í –ø—Ä–∏–Ω—Ü–∏–ø–µ, –ø–æ—á–µ–º—É –±—ã –∏ –Ω–µ—Ç- —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –±–æ–ª–µ–µ –≥—Ä–æ–º–æ–∑–¥–∫–∏–º, –Ω–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–∞—Ä—Ç–æ–π –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –±—ã—Å—Ç—Ä–µ–µ.

- –ù–∞—Ä—É—à–µ–Ω–∏–µ SRP, –º–µ—Ç–æ–¥—ã —á—É–∂–∏—Ö –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π. 

–ö–∞—Ä—Ç–∞ –¥–æ–ª–∂–Ω–∞ —Ç–æ–ª—å–∫–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–∞ –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –Ω–∏–º–∏: –≤—Å—Ç–∞–≤–∏—Ç—å, –≤—ã–¥–∞—Ç—å –æ–¥–Ω–æ —Å—É—â–µ—Å—Ç–≤–æ –∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ö—Ä–∞–Ω–∏–º—ã—Ö —Å—É—â–µ—Å—Ç–≤, —É–¥–∞–ª–∏—Ç—å.
–ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –º–µ—Ç–æ–¥ –Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, –∑–Ω–∞—á–∏—Ç –æ–Ω –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∫ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã, –∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∫ —á—É–∂–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.
–ó–¥–µ—Å—å –º–µ—Ç–æ–¥—ã —á—É–∂–∏—Ö –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π: —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–ª–æ—â–∞–¥—å –∫–∞—Ä—Ç—ã –∏ –Ω–∞–π—Ç–∏ —Å–æ—Å–µ–¥–Ω–∏–µ —è—á–µ–π–∫–∏.

–ù–∞–≤–µ—Ä–Ω–æ–µ, –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ü–µ–ª–æ–º –ø–æ–ª–µ–∑–Ω–æ –∏–º–µ—Ç—å –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∏—â–µ—Ç —Å–æ—Å–µ–¥–Ω–∏–µ —è—á–µ–π–∫–∏. 
–ù–æ —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –∏–º–µ–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ –µ–¥–∏–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã- —Ö—Ä–∞–Ω–µ–Ω–∏—é —Å—É—â–µ—Å—Ç–≤ –≤ —Å–µ–±–µ.  
–î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è/–≤—ã–¥–∞—á–∏ —Å—É—â–µ—Å—Ç–≤, –∫–∞—Ä—Ç–µ –Ω–µ –Ω—É–∂–Ω–æ —É–º–µ—Ç—å –∏—Å–∫–∞—Ç—å —Å–æ—Å–µ–¥–Ω–∏–µ —è—á–µ–π–∫–∏.  

–ú–µ—Ç–æ–¥—ã —á—É–∂–∏—Ö –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Ç–µ—Ö –∫–ª–∞—Å—Å–∞—Ö, –≤ –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç.
–ï—Å–ª–∏ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ –∫–ª–∞—Å—Å—ã, —Ç–æ –º–µ—Ç–æ–¥ –Ω—É–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä, BoardUtils.

- –ü—Ä–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —Å —É—á–∞—Å—Ç–∏–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã(–¥–æ–±–∞–≤–∏—Ç—å, –≤—ã–¥–∞—Ç—å, —É–¥–∞–ª–∏—Ç—å –∏ —Ç.–¥.), –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å. 
–ï—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞(–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–µ –ø—Ä–µ–¥–µ–ª–æ–≤ –∫–∞—Ä—Ç—ã), –Ω—É–∂–Ω–æ –±—Ä–æ—Å–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
```
public void placeEntity(Cell cell, Entity entity) {
  if (cellEntityGameMap.containsKey(cell)) {  <-- –ü–†–û–í–ï–†–Ø–ï–¢, –ß–¢–û –Ø–ß–ï–ô–ö–ê –ù–ï –ü–£–°–¢–ê–Ø, –ù–û –ù–ï –ü–†–û–í–ï–†–Ø–ï–¢ –ß–¢–û –û–ù–ê –í –ü–†–ï–î–ï–õ–ê–• –ö–ê–†–¢–´
    throw new IllegalStateException("Cell already taken");
  }
  cellEntityGameMap.put(cell, entity);
  entityCellGameMap.put(entity, cell);
}
```

- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –∫–∞—Ä—Ç–µ –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å —Ç–æ—á–∫–∏ 0,0 –∞ –Ω–µ 1,1
```
if (cell.row() >= 1 && cell.row() <= mapHeight)
```

–í–∏–∫–∏–ø–µ–¥–∏—è:
```
–í –¥–µ–∫–∞—Ä—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –Ω–∞—á–∞–ª–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç ‚Äî —ç—Ç–æ —Ç–æ—á–∫–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –≤—Å–µ –æ—Å–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. 
–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —ç—Ç–æ–π —Ç–æ—á–∫–∏ —Ä–∞–≤–Ω—ã –Ω—É–ª—é. 
–ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –ø–ª–æ—Å–∫–æ—Å—Ç–∏ –æ–Ω–∞ –∏–º–µ–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (0,0)
```

+ üëç –•–æ—Ä–æ—à–æ, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–æ–ø–∏—è –º–∞–ø—ã, –∞ –Ω–µ –æ—Ä–∏–≥–∏–Ω–∞–ª. 
–¢–µ–º —Å–∞–º—ã–º —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –∏ –∑–∞—â–∏—â–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∫–∞—Ä—Ç—ã
```
public Map<Cell, Entity> getCellEntityGameMap() {
  return new HashMap<>(cellEntityGameMap);
}
```

- –ú–µ—Ç–æ–¥ —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ö–æ–¥–∞ –≤ –∫–∞—Ä—Ç–µ- –Ω–∞—Ä—É—à–µ–Ω–∏–µ SRP.
–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –∏–∑ –∫–∞—Ä—Ç—ã –º–µ—Ç–æ–¥ —Ö–æ–¥–∞ –∏ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–π—Ü–∞ –∏–∑ –æ–¥–Ω–æ–≥–æ –∫—Ä–∞—è –≤ –¥—Ä—É–≥–æ–π –º–∏–Ω—É—è –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏—Å—Ç–∏–∫–∏
```
–ö–∞—Ä—Ç–∞ –∫–∞—Ä—Ç–∞ = new –ö–∞—Ä—Ç–∞(100, 100);
–∫–∞—Ä—Ç–∞.putEntity(new Coordinates(0, 0), new –ó–∞—è—Ü());
–∫–∞—Ä—Ç–∞.moveEntity(new Coordinates(0, 0), new Coordinates(99, 99));

/* class –ö–∞—Ä—Ç–∞ */
public void moveEntity(Cell from, Cell to) {
  if (!cellEntityGameMap.containsKey(from) || cellEntityGameMap.containsKey(to)) {
    throw new IllegalArgumentException("Incorrect entity");
  }
  Entity entity = getEntity(from);
  removeEntity(entity);
  placeEntity(to, entity);
}
```
–î–æ–ª–∂–Ω–∞ –ª–∏ –∫–∞—Ä—Ç–∞ —É—á–∏—Ç—ã–≤–∞—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫—É –∑–∞–π—Ü–µ–≤? –ï—Å–ª–∏ –¥–∞, —Ç–æ –∫–∞–∫? 

–ó–¥–µ—Å—å —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–∞–µ—Ç—Å—è- –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ–∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Ö–æ–¥—å–±–µ. 
–ó–Ω–∞—á–∏—Ç, –∫–∞—Ä—Ç–∞ –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è —á–∞—Å—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—é —Å—É—â–µ—Å—Ç–≤–∞- –∫–∞—Ä—Ç–∞ –∑–Ω–∞–µ—Ç *—á–∞—Å—Ç—å* –ø—Ä–∞–≤–∏–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤.
–ö–∞–∫ —Å–ª–µ–¥—Å—Ç–≤–∏–µ, –ø—Ä–∞–≤–∏–ª–∞ –¥–≤–∏–∂–µ–Ω–∏—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª–∞—Å—Å–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –∑–¥–µ—Å—å.

–ö–∞—Ä—Ç–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –∑–Ω–∞—Ç—å —ç—Ç–∏—Ö –ø—Ä–∞–≤–∏–ª, –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ- –∫–ª–∞—Å—Å–µ, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–≤–µ—Ä—à–∞–µ—Ç –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏–µ. 
–ê –∑–Ω–∞—á–∏—Ç, –ö–∞—Ä—Ç–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –º–µ—Ç–æ–¥ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏.

**6. class GameMapUtils**

+ üëç –ó–¥–µ—Å—å –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ä—Ç–æ–π: –Ω–∞–π—Ç–∏ –ø—É—Å—Ç—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å–≤—Ç–æ —Å—É—â–µ—Å—Ç–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ etc. 
–≠—Ç–æ —Ö–æ—Ä–æ—à–æ.

- –£—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å —ç—Ç–æ –∫–ª–∞—Å—Å —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏. –ó–¥–µ—Å—å –º–µ—Ç–æ–¥—ã –Ω–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ, –∞ –∑–Ω–∞—á–∏—Ç, —ç—Ç–æ –Ω–µ —É—Ç–∏–ª–∏—Ç–∞, –∞ "Manager".

**7. interface PathFinder**

+ üëç –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏ —ç—Ç–æ —Ö–æ—Ä–æ—à–æ. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞: BFS, AStar –∏ —Ç.–¥.

- –ù–∞—Ä—É—à–µ–Ω–∏–µ SRP.

–ü–æ–∏—Å–∫ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ –∏—Å–∫–∞—Ç—å –ø—É—Ç—å –æ—Ç —Ç–æ—á–∫–∏ —Å—Ç–∞—Ä—Ç–∞ –¥–æ —Ç–æ—á–∫–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∑–∞–¥–∞–Ω–Ω—ã–º —É—Å–ª–æ–≤–∏—è–º. 
–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ- –¥–æ —Ç–æ—á–∫–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ –Ω—É–∂–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞.

–ï—Å–ª–∏ –ø–æ–∏—Å–∫ –ø–æ–ª—É—á–∞–µ—Ç –≤–æ –≤—Ö–æ–¥—è—â–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–ª–∏, –∑–Ω–∞—á–∏—Ç —á–∞—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø–æ–∏—Å–∫–∞ —É–∂–µ –≤—ã–ø–æ–ª–Ω–∏–ª –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π. 
–¢–æ –µ—Å—Ç—å, –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π —É–∂–µ –Ω–∞—à–µ–ª —Ü–µ–ª—å –∏ –ø–µ—Ä–µ–¥–∞–ª –µ–µ –∫–æ—Ä–¥–∏–Ω–∞—Ç—É –≤ –ø–æ–∏—Å–∫ –ø—É—Ç–∏
```
List<Cell> getPath(Cell target);
```
–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –ø–æ–∏—Å–∫ –ø—É—Ç–∏ –¥–æ–ª–∂–µ–Ω —Å–∞–º –∏—Å–∫–∞—Ç—å —Ü–µ–ª—å –∏ –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞—Ç—å –∫ –Ω–µ–π –ø—É—Ç—å. –°–∏–≥–Ω–∞—Ç—É—Ä–∞ –º–µ—Ç–æ–¥–∞ –¥–ª—è —ç—Ç–æ–≥–æ –¥–æ–ª–∂–Ω–∞ –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫
```
List<Cell> getPath(GameMap gameMap, Cell start, Class<? extends Entity> target) {
  //–∏—â–µ—Ç –ø—É—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ –æ—Ç —Ç–æ—á–∫–∏ start
  //–¥–æ —Ç–æ—á–∫–∏, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ –Ω—É–∂–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞(–Ω–∞–ø—Ä. target == Grass.class)
}
```

**8. class Bfs implements PathFinder**, BFS-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏

+ üëç –•–æ—Ä–æ—à–æ, —á—Ç–æ –∫–ª–∞—Å—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "Bfs", –∞ –Ω–µ "BFS". –°—Ä–µ–¥–∏ –ø—Ä–æ—á–µ–≥–æ, —ç—Ç–æ –≤ —Ç–µ–∫—Å—Ç–µ –Ω–µ –±—É–¥–µ—Ç –ø—É—Ç–∞—Ç—å —Å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π.

- –õ–∏—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```
public Bfs(Creature creature, GameMap gameMap, GameMapUtils gameMapUtils) {
  //...
  this.creaturePosition = gameMap.getCell(creature);
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
public Bfs(Cell creaturePosition, GameMap gameMap, GameMapUtils gameMapUtils) {
  //...
  this.creaturePosition = creaturePosition;
}
```

- –î–ª—è BFS –ø–æ–∏—Å–∫–∞ –Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É —Ü–µ–ª–∏, –∞ —Å–µ–π—á–∞—Å –º–µ—Ç–æ–¥ –ø–æ–∏—Å–∫–∞ –∑–∞—á–µ–º-—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–ª–∏:
```
public List<Cell> getPath(Cell target)
```
–ê–ª–≥–æ—Ä–∏—Ç–º BFS –¥–æ–ª–∂–µ–Ω –∏—Å–∫–∞—Ç—å –ø–µ—Ä–≤—É—é –ø–æ–ø–∞–≤—à—É—é—Å—è —è—á–µ–π–∫—É —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º —Å—É—â–µ—Å—Ç–≤–æ–º, –∞ –Ω–µ –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞—Ç—å –ø—É—Ç—å –∫ –∫–∞–∫–æ–π-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —è—á–µ–π–∫–µ.

- –ú–∞–ø–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –æ–±—ã—á–Ω–æ –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —ç—Ä–∑–∞—Ü-–∑–∞–º–µ–Ω–∏—Ç–µ–ª—å —Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
```
Map<Cell, Cell> cellParent = new HashMap<>();
```
–í–º–µ—Å—Ç–æ –º–∞–ø—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Å–¥–µ–ª–∞–π –∫–ª–∞—Å—Å —Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞, –∞–ª–≥–æ—Ä–∏—Ç–º —Ç–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø–æ–Ω—è—Ç–Ω–µ–µ.
–ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫:
```
class Node {
  private Coordinate coordinate; 
  private Node parent;
  //...
  public Coordinate getCoordinate() {...}
  public Node getParent() {...}
}
```

**9. abstract class Entity –∏ –ø—Ä–æ—Å—Ç—ã–µ –ø–æ—Ç–æ–º–∫–∏ Rock/Tree**

üëç –ò–¥–µ–∞–ª—å–Ω–æ
```
public abstract class Entity {
}
```
public class Rock extends TerrainObject{
}

**10. class Grass extends Supply**

–ù–∞—Ä—É—à–µ–Ω–∏–µ –û–û–ü –¥–∏–∑–∞–π–Ω–∞ –≤ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏
```
public Grass() {
  super();
  this.supplyHeal = DEFAULT_GRASS_SUPPLY_HEAL;
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
public Grass(){
  super(DEFAULT_GRASS_SUPPLY_HEAL);
}
```

**11. enum EntityType**

- –ï–Ω–∞–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –≤–Ω–µ—à–Ω–µ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –∫–ª–∞—Å—Å–æ–≤
```
enum EntityType {
  CREATURE(Creature.class),
  HERBIVORE(Herbivore.class),
  //...
}
```
–ù–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é. 
–ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –Ω–∞ –∏—Ö –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫ –∫–ª–∞—Å—Å–∞–º –Ω—É–∂–Ω–æ —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã: –º–µ—Ç–æ–¥ `getClass()`.

**12. abstract class Creature extends Entity**

+ üëç –ë–ª–∞–≥–æ–¥–∞—Ä—è —Ç–æ–º—É, —á—Ç–æ –µ–¥–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ª–∏—Å—Ç–µ, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–∞ —Å—É—â–µ—Å—Ç–≤ –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∏–¥–æ–≤ –µ–¥—ã.

- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π —Å–∏—Å—Ç–µ–º—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –∫–ª–∞—Å—Å–æ–≤
```
protected final List<EntityType> targetEntities;

//–ü–†–ê–í–ò–õ–¨–ù–û:
protected final List<Class<? extends Entity>> targetEntities;
```

- –ù–∞—Ä—É—à–µ–Ω–∏–µ SRP.

–°—É–¥—è –ø–æ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ, –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ —É–∂–µ —É–∂–µ –≤—ã–ø–æ–ª–Ω–∏–ª —á–∞—Å—Ç—å —Ä–∞–±–æ—Ç—ã- –Ω–∞—à–µ–ª –ø—É—Ç—å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ –∫—Ä–µ–∞—Ç—É—Ä–∞.
–°–∞–º–æ–π –∫—Ä–µ–∞—Ç—É—Ä–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –¥–æ–≤–µ—Ä–∏—Ç—å—Å—è —ç—Ç–æ–º—É –ø—É—Ç–∏
```
void makeMove(List<Cell> path, GameMap gameMap)
```
–ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤–æ –≤ —Å–µ–±–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è, —Ç–æ –∏ –ø—É—Ç—å –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è –æ–Ω–æ –¥–æ–ª–∂–Ω–æ —Ç–æ–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.

**13. class Predator/Herbivore extends Creature**

–°–Ω–æ–≤–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏
```
private int damage;

public Predator() {
  this.healthPoints = DEFAULT_PREDATOR_HEALTH_POINTS;
  this.damage = DEFAULT_PREDATOR_DAMAGE;
  this.stepLength = DEFAULT_PREDATOR_STEP_LENGTH;
  targetEntities.add(EntityType.HERBIVORE);
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
private int damage;

public Predator() {
  super(
    DEFAULT_PREDATOR_HEALTH_POINTS,
    DEFAULT_PREDATOR_STEP_LENGTH,
    List.of(EntityType.HERBIVORE) // List.of(Herbivore.class)
  )  
  this.damage = DEFAULT_PREDATOR_DAMAGE;
}
```

**14. abstract class Action**

–ù–µ –≤—Å–µ–º –ø–æ—Ç–æ–º–∫–∞–º Action –Ω—É–∂–Ω–∞ —Ñ–∞–±—Ä–∏–∫–∞ —Å—É—â–µ—Å—Ç–≤, –ø–æ—ç—Ç–æ–º—É —ç—Ç–∞ —Ñ–∞–±—Ä–∏–∫–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –∑–¥–µ—Å—å —Ö—Ä–∞–Ω–∏—Ç—Å—è. 
–û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–∞ —Ç–æ–º —É—Ä–æ–≤–Ω–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, –≥–¥–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
```
public abstract class Action {
  protected final EntityFactory entityFactory;
  //...
}
```

**15. class EntityInitCreation extends InitAction**

–ö–∞–∂–¥—ã–π —Ä–∞–∑  –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –í–°–ï–• –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. –ê–ª–≥–æ—Ä–∏—Ç–º —è–≤–Ω–æ –∏–∑–±—ã—Ç–æ—á–µ–Ω –∏ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ
```
public void execute() {
  fillCellsList(cells);
  //...
}

private void fillCellsList(List<Cell> cells) {
  for (int row = 1; row <= gameMap.getMapHeight(); row++) {
    for (int column = 1; column <= gameMap.getMapWidth(); column++) {
      Cell cell = new Cell(row, column);
      cells.add(cell);
    }
  }
}
```
–î–ª—è –Ω–∞—á–∞–ª–∞ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–∫–æ–π —Å–∏—Å–æ–∫ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ, –∞ –¥–∞–ª—å—à–µ –ø—Ä–æ—Å—Ç–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –Ω–∞ –∫–∞–∂–¥–æ–º —Ö–æ–¥–µ:
```
List<Cell> temp = new ArrayList<>(cells);
```
–ê –ø–æ—Ç–æ–º –Ω—É–∂–Ω–æ –≤–æ–æ–±—â–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ—Å—Ç—å—é —Ç–∞–∫–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞. 

**16. class MoveCreaturesAction extends TurnAction**

–ö—É—á–∞ –ª–æ–≥–∏–∫–∏ –ø–æ –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—é —Å—É—â–µ—Å—Ç–≤.

–°–µ–π—á–∞—Å –ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤, —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ —Ç—Ä–∏ –∫–ª–∞—Å—Å–∞: —ç—Ç–æ—Ç, Creature `makeMove(...)` –∏ GameMap `moveEntity(...)`.

–≠—Ç–∞ –ª–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –ª–µ–∂–∞—Ç—å –ª–∏–±–æ –≤ —Å–∞–º–æ–π –∫—Ä–µ–∞—Ç—É—Ä–µ –∏ –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –µ–≥–æ –º–µ—Ç–æ–¥–µ `makeMove(...)`.  
–ò —Ç–æ–≥–¥–∞ –∫—Ä–µ–∞—Ç—É—Ä–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–∏—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ —Å—É—â–Ω–æ—Å—Ç—å —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–ª–µ–π.

–õ–∏–±–æ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–ª–∞—Å—Å–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä `MoveCreaturesAction`, –Ω–æ —Ç–æ–≥–¥–∞ –≤ —Å–∞–º–æ–π –∫—Ä–µ–∞—Ç—É—Ä–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `makeMove(...)`.
–ò —Å—É—â–Ω–æ—Å—Ç—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–∏—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ —Å—É—â–Ω–æ—Å—Ç—å –±–µ–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–æ–ª–∏, –∫–∞–∫ —Ñ–∏–≥—É—Ä–∞ –≤ —à–∞—Ö–º–∞—Ç–∞—Ö, –∫–æ—Ç–æ—Ä—É—é –ø–µ—Ä–µ–¥–≤–∏–≥–∞–µ—Ç –∫—Ç–æ-—Ç–æ –µ—â–µ.

–ï—Å–ª–∏ –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Creature, —Ç–æ –º—É–≤–µ—Ä –¥–æ–ª–∂–µ–Ω —Ç–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ.  
–ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫:
```
class MoveAction —Ä–µ–∞–ª–∏–∑—É–µ—Ç Action {

  @Override
  public void execute(–ö–∞—Ä—Ç–∞ –∫–∞—Ä—Ç–∞) {
    List<Creature> creatures = getCreatures(–∫–∞—Ä—Ç–∞);
    for(Creature creature: creatures) {
      creature.makeMove(–∫–∞—Ä—Ç–∞);  //–¥–∞—ë—Ç –ø–∏–Ω–∫–∞
    }
  }

  private static List<Creature> getCreatures(–ö–∞—Ä—Ç–∞ –∫–∞—Ä—Ç–∞) {
    //–Ω–∞–π—Ç–∏ –∏ –≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ –∫—Ä–µ–∞—Ç—É—Ä—ã –∏–∑ –∫–∞—Ä—Ç—ã
  }
}
```

**17. interface UserInput**

–õ—É—á—à–µ —Å–¥–µ–ª–∞–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –∏–Ω–ø—É—Ç–µ—Ä–∞ –∏ –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö 
```
public interface UserInput {
  int getInteger() throws IOException;
  char getChar() throws IOException;
}

//–õ–£–ß–®–ï:
public interface UserInput<T> {
  T get();
}

public class IntUserInput implements UserInput<Integer>  {
  @Override
  public Integer get() {...}
}

public class CharUserInput implements UserInput<Character>  {
  @Override
  public Character get() {...}
}
```
–ï—â–µ –ª—É—á—à–µ- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [–î–ò–ê–õ–û–ì–ò](https://github.com/raketareview/simulation_review/blob/master/content/rev-sim076-ivan-LlqWst.md)

**18. class ConsoleInput implements UserInput**

–°–≤–æ–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–µ–ª–∞–π –Ω–µ–ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–º–∏(unchecked)

–¢–æ–≥–¥–∞ —Å—Ä–µ–¥–∏ –ø—Ä–æ—á–µ–≥–æ –Ω–µ –ø—Ä–∏–¥–µ—Ç—Å—è —É—Å–ª–æ–∂–Ω—è—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –º–µ—Ç–æ–¥–æ–≤
```
public int getInteger() throws IOException {
  //...
  if (!userInput.matches("^[0-9]+$")) {
    throw new IOException("Incorrect input by user, user entered: " + userInput);
  }
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
public int getInteger()  {  <-- –ù–ï–¢ –ú–£–°–û–†–ê –í –°–ò–ì–ù–ê–¢–£–†–ï
  //...
  if (!userInput.matches("^[0-9]+$")) {
    throw new IllegalArgumentException("Incorrect input by user, user entered: " + userInput);
  }
}
```
*"–ß–ö", –≥–ª.7, "...–ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è"*

- –ù–∞—Ä—É—à–µ–Ω–∏–µ DRY
```
public int getInteger() throws IOException {
  //...  
  throw new IOException("Incorrect input by user, user entered: " + userInput);
}

public char getChar() throws IOException {
  //...
  throw new IOException("Incorrect input by user, user entered: " + userInput);
}
```

**19. interface GameOutput –∏ –µ–≥–æ –∫–æ–Ω—Å–æ–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è class ConsoleOutput implements GameOutput**

+ üëç –í–º–µ—Å—Ç–µ —Å `interface UserInput` —ç—Ç–æ —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å–ª–æ–π `View`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–¥–µ–ª—è–µ—Ç –ª–æ–≥–∏–∫—É –æ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è. –≠—Ç–æ —Ö–æ—Ä–æ—à–æ
```
public interface GameOutput {
    String ASK_FOR_CHOOSE_MESSAGE = "–°–¥–µ–ª–∞–π—Ç–µ —Å–≤–æ–π –≤—ã–±–æ—Ä: ";
    String INCORRECT_USER_INPUT_MESSAGE = "–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä.";
    void showMessage(String message);
}
```

- *–≠—Ç–∏* –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —ç—Ç–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
```
String ASK_FOR_CHOOSE_MESSAGE = "–°–¥–µ–ª–∞–π—Ç–µ —Å–≤–æ–π –≤—ã–±–æ—Ä: ";
String INCORRECT_USER_INPUT_MESSAGE = "–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä.";
```
–ü–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã- —Ñ—Ä–∞–∑—ã –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —è–∑—ã–∫–µ. 
–°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —ç—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç–µ–ø–µ—Ä—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è- –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —è–∑—ã–∫–∞.
–≠—Ç–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ –∫–∞–∫–æ–µ-—Ç–æ –¥—Ä—É–≥–æ–µ –º–µ—Å—Ç–æ.

**20. –ú–µ–Ω—é**

+ üëç –ú–µ–Ω—é –≤ –û–û–ü —Å—Ç–∏–ª–µ üòéü§ùüòé

+ üëç –ü—Ä–∞–≤–∏–ª—å–Ω–æ, —á—Ç–æ –ø–µ—á–∞—Ç—å –∏–¥–µ—Ç –Ω–µ –Ω–∞–ø—Ä—è–º—É—é, –∞ —á–µ—Ä–µ–∑ —Å–ª–æ–π –í—å—é
```
gameOutput.showMessage(item);
```

**21. interface Renderer**

üëç –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞ —ç—Ç–æ —Ö–æ—Ä–æ—à–æ. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–Ω–¥–µ—Ä–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤–∏–∑—É–ª—å–Ω—ã—Ö —Å—Ä–µ–¥(–∫–æ–Ω—Å–æ–ª—å, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∏–Ω–¥–æ–≤—Å, http, –º–∞—Ç—Ä–∏—á–Ω—ã–π –ø—Ä–∏–Ω—Ç–µ—Ä etc)
–∏ —Ä–∞–∑–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏(—Ü–≤–µ—Ç–Ω–æ–π, —á–µ—Ä–Ω–æ-–±–µ–ª—ã–π –∏ –ø—Ä.)
```
public interface Renderer {
  void render(GameMap gameMap);
}
```

**22. class ConsoleRenderer implements Renderer**

- –ù—É–∂–Ω–æ –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
```
switch (entity.getClass().getSimpleName()) {
  //...
  default -> {
    throw new IllegalArgumentException("Unclassified entity");
  }
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
switch (entity.getClass().getSimpleName()) {
  //...
  default -> throw new IllegalArgumentException("Unclassified entity: " + entity);
}
```

- –ü–µ—á–∞—Ç–∞—Ç—å –∏–Ω—Ñ—É –Ω—É–∂–Ω–æ —Ç–æ–∂–µ —á–µ—Ä–µ–∑ —Å–ª–æ–π –í—å—é. –¢–∞–∫ –∂–µ, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –≤ –º–µ–Ω—é:
```
System.out.println(mapState);

//–ü–†–ê–í–ò–õ–¨–ù–û:
gameOutput.showMessage(mapState);
```

**23. class SimulationInitialization**

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —è–≤–ª–µ–Ω–∏—è–º –¥–∞–≤–∞–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è. 
–ü–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É —ç—Ç–æ- —Ñ–∞–±—Ä–∏–∫–∞ –∫–ª–∞—Å—Å–∞ Simulation, —Ç–æ –µ—Å—Ç—å SimulationFactory
```
public class SimulationInitialization {
  //...
  public Simulation init() {...}
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
public class SimulationFactory {
  //...
  public Simulation get() {...}
}
```

**24. class Simulation implements MainMenuHandler**

üëç –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
```
public Simulation(GameOutput gameOutput, UserInput userInput, GameMap gameMap, EntityFactory entityFactory, GameMapUtils gameMapUtils)
```

**25. class Main**, —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ main

üëç –¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–∏–º—É–ª—è—Ü–∏—é, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —á–µ—Ä–µ–∑ –º–µ–Ω—é, —ç—Ç–æ —Ö–æ—Ä–æ—à–æ.

## –í–´–í–û–î

–í —Ü–µ–ª–æ–º, –Ω–æ—Ä–º üëç

n.108(246)  
#—Ä–µ–≤—å—é #—Å–∏–º—É–ª—è—Ü–∏—è 