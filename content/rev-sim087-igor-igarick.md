https://github.com/igarick/Simulation_OOP  
[Igor]

–ï—Å—Ç—å –Ω–∞–¥ —á–µ–º –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å.

## –ù–ï–î–û–°–¢–ê–¢–ö–ò –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

1. –ö–∞—Ä—Ç–∞ —Ä–∞—Å–ø–µ—á–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫—Ä–∏–≤–æ–≤–∞—Ç–æ  
![pic](https://github.com/raketareview/simulation_review/blob/master/content/resources/rev-sim087/img0.png)

–°–≤—è–∑–∞–Ω–æ —ç—Ç–æ —Å —Ç–µ–º, —á—Ç–æ –ø—Ä–∏ —Ä–∞—Å–ø–µ—á–∞—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ —ç–º–æ–¥–∑–∏ –∏ –æ–±—ã—á–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã, –∞ –æ–Ω–∏ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—É—é —à–∏—Ä–∏–Ω—É.  
–ï—Å–ª–∏ —Ö–æ—á–µ—à—å —á—Ç–æ–±—ã –±—ã–ª–æ —Ä–æ–≤–Ω–æ, –ø–µ—á–∞—Ç–∞–π –≤—Å–µ —á–µ—Ä–µ–∑ —ç–º–æ–¥–∑–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫  
![pic](https://github.com/raketareview/simulation_review/blob/master/content/resources/rev-sim076/img0.png)

2. –í –ø—Ä–æ–≥—Ä–∞–º–º–µ —Ä–∞–±–æ–∞—Ç–∞–µ—Ç –∫–æ–º–∞–Ω–¥–∞ "–ü—É—Å–∫/–°—Ç–æ–ø". 
–ù–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–µ —Å–æ–æ–±—â–∞–µ—Ç—Å—è –æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥.
–Ø —Å–∞–º —É–∑–Ω–∞–ª –æ–± —ç—Ç–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö —Ç–æ–ª—å–∫–æ –∏–∑ –∫–æ–¥–∞.

## –•–û–†–û–®–û

+ üëç –°–ø—Ä–∞–π—Ç—ã —Å—É—â–µ—Å—Ç–≤ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Å–∞–º–∏—Ö —Å—É—â–µ—Å—Ç–≤–∞—Ö

## –ó–ê–ú–ï–ß–ê–ù–ò–Ø

**1. –ù–µ–π–º–∏–Ω–≥**

- –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∫–∞–∫ –º–æ–∂–Ω–æ –ª—É—á—à–µ –æ–±—ä—è—Å–Ω—è—Ç—å —Å—É—Ç—å —è–≤–ª–µ–Ω–∏—è. –≠—Ç–æ —à–∏—Ä–∏–Ω–∞ –∏ –≤—ã—Å–æ—Ç–∞ –∫–∞—Ä—Ç—ã
```
public class SimulationMap {
  private final int rowCount;
  private final int columnCount;
  //...
}

//–õ–£–ß–®–ï:
public class SimulationMap {
  private final int height;
  private final int width;
  //...
}
```

- –ò–∑–±—ã—Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
```
simulation.startSimulation();

//–õ–£–ß–®–ï:
simulation.start();
```

- class Path
  - –ï—Å–ª–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å –∫–ª–∞—Å—Å —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º, —Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å –∏–º–µ–Ω–µ–º, –≤–∫–ª—é—á–∞—é—â–∏–º —ç—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞. –ò–Ω–∞—á–µ —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—É—Ç–∞–Ω–∏—Ü–µ. 
  - –ö–ª–∞—Å—Å –ü—É—Ç—å –∑–¥–µ—Å—å –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—É—Ç—å, –∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏
```
class Path {}

public abstract class Creature extends Entity implements AliveEntity {
  public void makeMove(..., List<Coordinates> path) {...}
  //...
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
class PathFinder {}

public abstract class Creature extends Entity implements AliveEntity {
  public void makeMove(..., List<Coordinates> path) {...}
  //...
}
```

- –ù–∞–∑–≤–∞–Ω–∏–µ –æ–±–º–∞–Ω—ã–≤–∞–µ—Ç. –ú–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –∞ —Ö–æ–¥. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞(Coordinates) –∏ –•–æ–¥(Move) —ç—Ç–æ –Ω–µ —Å–∏–Ω–æ–Ω–∏–º—ã, —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –∫–ª–∞—Å—Å—ã
```
Move getCoordinatesForMove(SimulationMap simulationMap, List<Coordinates> path)
```
*Oracle Java code conventions, part."Naming conventions"*  
*–ú–∞—Ä—Ç–∏–Ω, "–ß–∏—Å—Ç—ã–π –∫–æ–¥", –≥–ª.2*  
*–Æ—Ç—É–±, –ù–µ–º—á–∏–Ω—Å–∫–∏–π "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –º–µ—Ç–æ–¥—ã –∏ –∫–ª–∞—Å—Å—ã?"*  

**2. –ù–∞—Ä—É—à–µ–Ω–∏–µ DRY**, –º–∞–≥–∏—á–µ—Å–∫–∏–µ –±—É–∫–≤—ã, —á–∏—Å–ª–∞, —Å–ª–æ–≤–∞. –í–≤–æ–¥–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã 
```
if (input.equals("p")) {...}
System.out.println("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –ù–∞–∂–º–∏—Ç–µ *p* –∏ –∑–∞—Ç–µ–º Enter –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è / –≤—ã–∫–ª—é—á–µ–Ω–∏—è –ø–∞—É–∑—ã");

//–ü–†–ê–í–ò–õ–¨–ù–û:
private final static String PAUSE = "p";

if (input.equals(PAUSE)) {...}
System.out.printf("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –ù–∞–∂–º–∏—Ç–µ '%s' –∏ –∑–∞—Ç–µ–º Enter –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è / –≤—ã–∫–ª—é—á–µ–Ω–∏—è –ø–∞—É–∑—ã \n", PAUSE);
```
*–§–∞—É–ª–µ—Ä, "–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥", –≥–ª.8, "–ó–∞–º–µ–Ω–∞ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —á–∏—Å–ª–∞ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π"*  
*refactoring.guru "–ó–∞–º–µ–Ω–∞ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —á–∏—Å–ª–∞ —Å–∏–º–≤–æ–ª—å–Ω–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π"*  

**3. –ï—Å–ª–∏ –≤ –±–ª–æ–∫–µ if –µ—Å—Ç—å return**(break, continue, throw, exit –∏ —Ç.–¥.), —Ç–æ else –Ω–µ –ø–∏—à–µ—Ç—Å—è.  
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–µ–≤–∞–∂–Ω–æ, –±—É–¥–µ—Ç else –∏–ª–∏ –Ω–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ –∏ –∫–æ–¥ –±–µ–∑ `else` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —á–∏—Ç–∞–±–µ–ª—å–Ω–µ–π
```
if (target.isInstance(entity)) {
  return constructPathToTarget(cameFrom, coordinates);
} else {
  queue.add(coordinates);
}

//–ü–†–ê–í–ò–õ–¨–ù–û:
if (target.isInstance(entity)) {
  return constructPathToTarget(cameFrom, coordinates);
}
queue.add(coordinates);
```

**4. class Coordinates**

+ üëç –ù–µ—Ç –Ω–∏—á–µ–≥–æ –ª–∏—à–Ω–µ–≥–æ, —ç—Ç–æ —Ö–æ—Ä–æ—à–æ. –ü–æ–ª—è –ø—É–±–ª–∏—á–Ω—ã–µ- –ø–æ—á–µ–º—É –±—ã –∏ –Ω–µ—Ç, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É *–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ* –º–æ–∂–Ω–æ –ø–æ–∑–∏—Ü–∏–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
```
public class Coordinates {
  public final int row;
  public final int column;
  //...
}
```
–ü—Ä–æ –æ—Ç–ª–∏—á–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –æ—Ç –æ–±—ä–µ–∫—Ç–æ–≤ —Ç—É—Ç: *–ú–∞—Ä—Ç–∏–Ω "–ß–ö", –≥–ª.6*

- –ö–ª–∞—Å—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ record –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

- –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥- –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω "–õ–æ–¥–æ—á–Ω—ã–π —è–∫–æ—Ä—å". 

–≠—Ç–æ—Ç –∫–æ–¥ –Ω–∏–∫–æ–≥–¥–∞ —É–∂–µ –Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è, –Ω–µ –ø—Ä–µ–≤—Ä–∞—â–∞–π –ø—Ä–æ–≥—Ä–∞–º–º—É –≤ –º—É—Å–æ—Ä–∫—É. 
–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Ö–æ—á–µ—à—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞ –ø–∞–º—è—Ç—å, —Å–¥–µ–ª–∞–π –∫–æ–º–º–∏—Ç –≤ –≥–∏—Ç–µ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º.  
–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤- *"–ß–∏—Å—Ç—ã–π –∫–æ–¥", –≥–ª.4*

**5. class CoordinatesShift**, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –¥–ª—è —Å–¥–≤–∏–≥–∞

–ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞, –æ–Ω –Ω–µ –¥–∞–µ—Ç –Ω–∏—á–µ–≥–æ –±–æ–ª—å—à–µ, —á–µ–º –º–æ–∂–µ—Ç –¥–∞—Ç—å –∫–ª–∞—Å—Å Coordinates. 
–î–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å–¥–≤–∏–≥–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–∞–∫
```
Coordinates shifDownRightCoordinates = new Coordinates(-1, 1);
```

**6. class SimulationMap**

- –ù–∞—Ä—É—à–µ–Ω–∏–µ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ –∫–æ–¥–∞: 
  - –ü–æ–ª—è –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤–≤–µ—Ä—Ö—É, –ø–µ—Ä–µ–¥ –º–µ—Ç–æ–¥–∞–º–∏
  - –ü–µ—Ä–≤—ã–º –∏–∑ –º–µ—Ç–æ–¥–æ–≤ –¥–æ–ª–∂–µ–Ω —Å—Ç–æ—è—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

+ üëç –ü–µ—Ä–µ–≥—Ä—É–∂–µ–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã —Å–¥–µ–ª–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–π null
```
private final HashMap<Coordinates, Entity> entities = new HashMap<>();

public Entity getEntity(Coordinates coordinates) {
  return entities.get(coordinates);  //–º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å null
}
```
–í–æ–∑–≤—Ä–∞—Ç null –ø–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è NullPointerException –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ.  
*–ú–∞—Ä—Ç–∏–Ω, "–ß–∏—Å—Ç—ã–π –∫–æ–¥", –≥–ª.7.7-8*  
*–Æ—Ç—É–±, –ù–µ–º—á–∏–Ω—Å–∫–∏–π "–ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å NULL?"*  

- –ü—Ä–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —Å —É—á–∞—Å—Ç–∏–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã(–¥–æ–±–∞–≤–∏—Ç—å, –≤—ã–¥–∞—Ç—å, —É–¥–∞–ª–∏—Ç—å –∏ —Ç.–¥.), –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å. 
–ï—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞(–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–µ –ø—Ä–µ–¥–µ–ª–æ–≤ –∫–∞—Ä—Ç—ã), –Ω—É–∂–Ω–æ –±—Ä–æ—Å–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
```
public boolean isEmpty(Coordinates coordinates) {
  return !entities.containsKey(coordinates);
}
```
–°–µ–π—á–∞—Å, –µ—Å–ª–∏ —Å–ø—Ä–æ—Å–∏—Ç—å —É –∫–∞—Ä—Ç—ã, –ø—É—Å—Ç–∞—è –ª–∏ —è—á–µ–π–∫–∞ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ (+100500, -100500), —Ç–æ –∫–∞—Ä—Ç–∞ –æ—Ç–≤–µ—Ç–∏—Ç, —á—Ç–æ –ø—É—Å—Ç–∞. –ê –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ç–∞–∫–æ–π —è—á–µ–π–∫–∏ –≤–æ–æ–±—â–µ –Ω–µ—Ç.

+ üëç –ú–µ—Ç–æ–¥ –Ω–æ—Ä–º, –Ω–æ –Ω–µ "–ø–æ–ª—É—á–∏—Ç—å–°—É—â–µ—Å—Ç–≤–æ", –∞ "–ø–æ–ª—É—á–∏—Ç—å–°—É—â–µ—Å—Ç–≤–∞"
```
 public List<Entity> getEntityByType(Class<? extends Entity> targetType)
```

- –ú–µ—Ç–æ–¥ —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ö–æ–¥–∞ –≤ –∫–∞—Ä—Ç–µ- –Ω–∞—Ä—É—à–µ–Ω–∏–µ SRP.

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –∏–∑ –∫–∞—Ä—Ç—ã –º–µ—Ç–æ–¥ —Ö–æ–¥–∞ –∏ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–π—Ü–∞ –∏–∑ –æ–¥–Ω–æ–≥–æ –∫—Ä–∞—è –≤ –¥—Ä—É–≥–æ–π –º–∏–Ω—É—è –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏—Å—Ç–∏–∫–∏
```
–ö–∞—Ä—Ç–∞ –∫–∞—Ä—Ç–∞ = new –ö–∞—Ä—Ç–∞(100, 100);
–∫–∞—Ä—Ç–∞.setEntity(new Coordinates(0, 0), new –ó–∞—è—Ü());
–∫–∞—Ä—Ç–∞.makeMove(new Coordinates(0, 0), new Coordinates(99, 99));

/* –∫–ª–∞—Å—Å –ö–∞—Ä—Ç–∞ */
  public void makeMove(Coordinates from, Coordinates to) {
    Entity entity = entities.get(from);
    removeEntity(from);
    setEntity(to, entity);
  }
```
–î–æ–ª–∂–Ω–∞ –ª–∏ –∫–∞—Ä—Ç–∞ —É—á–∏—Ç—ã–≤–∞—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫—É –∑–∞–π—Ü–µ–≤? –ï—Å–ª–∏ –¥–∞, —Ç–æ –∫–∞–∫? –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç- –∫–∞—Ä—Ç–∞ –≤–æ–æ–±—â–µ –Ω–µ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –≤ —Å–µ–±–µ –º–µ—Ç–æ–¥ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏.

+ üëç –í —Ü–µ–ª–æ–º, –∫–∞—Ä—Ç–∞ —Å–æ–±–ª—é–¥–∞–µ—Ç SRP. –ù—é–∞–Ω—Å —Å `makeMove()`- –Ω–µ—Å—É—â–µ—Å—Ç–≤–µ–Ω–µ–Ω.

**7. class Path**, –ø–æ–∏—Å–∫ –ø—É—Ç–∏

- –ù–∞—Ä—É—à–µ–Ω–∏–µ SRP. –ö–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ –∏—Å–∫–∞—Ç—å –ø—É—Ç—å –æ—Ç —Ç–æ—á–∫–∏ —Å—Ç–∞—Ä—Ç–∞ –¥–æ —Ç–æ—á–∫–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∑–∞–¥–∞–Ω–Ω—ã–º —É—Å–ª–æ–≤–∏—è–º.

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ- –¥–æ —Ç–æ—á–∫–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ –Ω—É–∂–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞.
–≠—Ç–∏ —É—Å–ª–æ–≤–∏—è –∫–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤ —Å–µ–±—è –∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —ç—Ç–∏ —É—Å–ª–æ–≤–∏—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. 
–ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∏—Å–∫ –Ω–µ –¥–æ–ª–∂–µ–Ω –≤–º–µ—Å—Ç–æ —Ç–æ—á–∫–∏ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤–æ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—è –ø–æ–ª–æ–∂–µ–Ω–∏–µ —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤–∞ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ, —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—å —Ç–æ—á–∫—É —Å—Ç–∞—Ä—Ç–∞
```
public static List<Coordinates> findPath(Creature creature, SimulationMap simulationMap, Class<? extends Entity> target)

//–ü–†–ê–í–ò–õ–¨–ù–û:
public static List<Coordinates> findPath(Coordinates start, SimulationMap simulationMap, Class<? extends Entity> target)
```

- –ù–∞—Ä—É—à–µ–Ω–∏–µ SRP. 

–ü–æ–∏—Å–∫ –ø—É—Ç–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫—Ä–µ–∞—Ç—É—Ä –∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —ç—Ç–æ–≥–æ —ç—Ç–æ–≥–æ –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç
```
private static Set<Coordinates> getReachableNeighbors(...) {
  //...
  if (creature.canMoveThrough(entity)) {
    result.add(neighbor);
  }
  //...
}
```
–¢–æ –µ—Å—Ç—å, –ø–æ–∏—Å–∫ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω–∞–ø—Ä–∏–º–µ—Ä, —É –í–æ–ª–∫–∞, –ø–æ –∫–∞–∫–∏–º –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—è–º(—Å—É—â–µ—Å—Ç–≤–∞–º) –í–æ–ª–∫ –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏ –µ—Å–ª–∏ –Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–µ —Å—Ç–æ–∏—Ç —Ç–∞–∫–æ–µ —Å—É—â–µ—Å—Ç–≤–æ, —Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —ç—Ç—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É –≤ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ö–æ–¥–∏–º—ã—Ö.
–í–æ–ª–∫ –º–æ–∂–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—è–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ–º, —Ç—Ä–∞–≤–æ–π –∏ –¥—Ä—É–≥–∏–º –í–æ–ª–∫–æ–º. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –í–æ–ª–∫ –º–æ–∂–µ—Ç —Ö–æ–¥–∏—Ç—å –ø–æ –ó–∞–π—Ü—É
```
public class Predator extends Creature {
  public boolean canMoveThrough(Entity entity) {
    return !(entity instanceof Obstacle || entity instanceof Grass || entity instanceof Predator);
  }
  //...
}
```
–¢—É—Ç –∫—Ä–æ–µ—Ç—Å—è –∫–∞–∫–∞—è-—Ç–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞. 

–Ø —Ç–∞–∫ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —ç—Ç–æ –≤ –∫–∞–∫–æ–π-—Ç–æ –º–µ—Ä–µ –¥—É–±–ª–∏—Ä—É–µ—Ç –ø–æ–∏—Å–∫ —Ü–µ–ª–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–æ–∏—Å–∫–∞ `findPath(..., Class<? extends Entity> target)`. 
–ü–æ—Ç–æ–º—É —á—Ç–æ —Å—É—Ç—å –º–µ—Ç–æ–¥–∞ `canMoveThrough(...)` –¥–ª—è –í–æ–ª–∫–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω —Ä–∞–∑—Ä–µ—à–∏—Ç –ø—Ä–æ–∫–ª–∞–¥—ã–≤–∞—Ç—å –ø—É—Ç—å, —à–∞–≥–∞—è –ø–æ `null` —Ç–æ–ª—å–∫–æ –¥–æ –ó–∞–π—Ü–∞. 
–ê —Ç–∞–∫–æ–π –∂–µ –º–µ—Ç–æ–¥ —É –ó–∞–π—Ü–∞- —à–∞–≥–∞—Ç—å –ø–æ `null`, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–æ –¢—Ä–∞–≤—ã.

–Ø –±—ã –ø–æ–Ω—è–ª –µ—â–µ, –µ—Å–ª–∏ –±—ã —Ä–∞–∑–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤–∞ –º–æ–≥–ª–∏ –±—ã —Ö–æ–¥–∏—Ç—å –ø–æ —Ä–∞–∑–Ω—ã–º –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—è–º –∏ –¥–ª—è —ç—Ç–æ–≥–æ –±—ã–ª –±—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —ç—Ç–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏. 
–ù–∞–ø—Ä–∏–º–µ—Ä, –í–æ–ª–∫ –º–æ–≥ –±—ã –ø–µ—Ä–µ—Å–∫–∞–∫–∏–≤–∞—Ç—å —Ç—Ä–∞–≤—É, –∞ –ó–∞—è—Ü- –ø–µ—Ä–µ–ø—Ä—ã–≥–∏–≤–∞—Ç—å –¥—Ä—É–≥–æ–≥–æ –ó–∞–π—Ü–∞. –¢–æ–≥–¥–∞ –±—ã –≤ —ç—Ç–æ–º –±—ã–ª —Å–º—ã—Å–ª.

–ù–æ –¥–∞–∂–µ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ, –Ω–∞–ø–æ–º–∏–Ω–∞—é, —á—Ç–æ –ø–æ–∏—Å–∫ –ø—É—Ç–∏ –¥–æ–ª–∂–µ–Ω –≤—Å–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏—Ö —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. 
–ï—Å–ª–∏ –±—ã –±—ã–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ –ø—Ä–æ—Ö–æ–¥–∏–º—ã–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏, –º–µ—Ç–æ–¥ –∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–∂–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –±—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –º–µ—Ç–æ–¥–∞.  
–ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫
```
public static List<Coordinates> findPath(Coordinates start, SimulationMap simulationMap, Class<? extends Entity> target, Predicate<Entity> –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å–ü—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
```
–£ –í–æ–ª–∫–∞ –±—ã–ª –±—ã —Ç–∞–∫–æ–π –º–µ—Ç–æ–¥ –æ–ø—Ä–µ–¥–µ–¥–ª–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥–∏–º–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
```
class –í–æ–ª–∫ {
  @Override  
  public boolean is–ü—Ä–æ—Ö–æ–¥–∏–º–∞—è–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å(Entity entity) {
    return entity instanceof Grass; //–≤–æ–ª–∫ —Ö–æ–¥–∏—Ç –ø–æ —Ç—Ä–∞–≤–µ
  } 
}
```
–ò —Ç–æ–≥–¥–∞ –ø–æ–∏—Å–∫ –ø—É—Ç–∏ –¥–ª—è –í–æ–ª–∫–∞ –≤—ã–≥–ª—è–¥–µ–ª –±—ã —Ç–∞–∫:
```
–í–æ–ª–∫ –≤–æ–ª–∫ = new –í–æ–ª–∫();
–ó–∞—è—Ü –∑–∞—è—Ü = new –ó–∞—è—Ü();

SimulationMap simulationMap = new WorldMap(100, 100);
simulationMap.setEntity(–≤–æ–ª–∫, new Coordinates(0, 0));
simulationMap.setEntity(–∑–∞—è—Ü, new Coordinates(99, 99));

Coordinates start = worldMap.get(–≤–æ–ª–∫);
Class<? extends Entity> target = –≤–æ–ª–∫.getTarget();

List<Coordinates> –ø—É—Ç—å–û—Ç–í–æ–ª–∫–∞–î–æ–ó–∞–π—Ü–∞ = findPath(start, simulationMap, target, –≤–æ–ª–∫::is–ü—Ä–æ—Ö–æ–¥–∏–º–∞—è–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å);
```

–ê —Å–µ–π—á–∞—Å, –∫–∞–∂–µ—Ç—Å—è, —Ç—ã –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–º—É–¥—Ä–∏–ª —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏. 
–î–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å, –±—É–¥–µ—Ç –ª–∏ —Ç–∞–∫ –∂–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º, –µ—Å–ª–∏ –ø–æ–º–µ–Ω—è—Ç—å
```
//–≠–¢–û:
if (creature.canMoveThrough(entity)) {
  result.add(neighbor);
}

//–ù–ê:
if (entity == null || target.isInstance(entity)) {
  result.add(neighbor);
}
```

**8. class PathUtils**

–ï—Å–ª–∏ –∫–ª–∞—Å—Å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã, —Ç–æ –∫–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `final` –∏ –∏–º–µ—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. 
–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä —Ç–∞–∫–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∏–ª–∏ —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç –Ω–µ–≥–æ.

**9. abstract class Entity**

- –°–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É. –ù–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ —Ç–æ–º—É —Å—É—â–µ—Å—Ç–≤—É, –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ–¥–∏—Ç. –ü–æ—ç—Ç–æ–º—É entities –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞—è —Å —É—Ä–æ–≤–Ω—è `Creature`.

- –ù–∞—Ä—É—à–µ–Ω–∏–µ –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏. –≠—Ç–æ—Ç –∫–ª–∞—Å—Å —É–∂–µ –Ω–µ–ª—å–∑—è —Å—á–∏—Ç–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π- –æ—Ç –Ω–µ–≥–æ —Ç—è–Ω–µ—Ç—Å—è –±–æ–ª—å—à–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è. –î–æ—Å—Ç—É–ø –∫ –ø–æ–ª—è–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –ø—Ä—è–º–æ–π, –∞ —á–µ—Ä–µ–∑ –≥–µ—Ç—Ç–µ—Ä—ã –∏ —Å–µ—Ç—Ç–µ—Ä—ã
```
public Coordinates coordinates;
```

**10. class Creature extends Entity implements AliveEntity**

- –ù–∞—Ä—É—à–µ–Ω–∏–µ –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏. –ú–Ω–æ–≥–æ –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤. 

–ï—Å–ª–∏ –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞, –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å private- `Move getCoordinatesForMove(...)`.
–ï—Å–ª–∏ –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ –∏ –≤ –ø–æ—Ç–æ–º–∫–∞—Ö, –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å protected- `void dropToMinHealth(int health)` etc.

* ü§∑ –ú–µ—Ç–æ–¥ —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ö–æ–¥–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–æ –≤—Ö–æ–¥—è—â–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø—É—Ç—å –∫ —Ü–µ–ª–∏, –∞ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –µ–≥–æ –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å –ø–æ–∏—Å–∫–∞ —Ü–µ–ª–∏. –í –ø—Ä–∏–Ω—Ü–∏–ø–µ, –ø–æ—á–µ–º—É –±—ã –∏ –Ω–µ—Ç
```
//–ú–û–ñ–ù–û –ò –¢–ê–ö(–ù–ê–í–ï–†–ù–û–ï)
void makeMove(SimulationMap simulationMap, List<Coordinates> path) <-- —Å–µ–π—á–∞—Å —Ç–∞–∫

//–û–ë–´–ß–ù–û –î–ï–õ–ê–ï–¢–°–Ø –¢–ê–ö:
void makeMove(SimulationMap simulationMap) {
  List<Coordinates> path = pathFinder.get(simulationMap, coordinates, getTarget())  <-- –º–Ω–µ —Ç–∞–∫ –±–æ–ª—å—à–µ –Ω—Ä–∞–≤–∏—Ç—Å—è
  //...
}
```
–û —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ—Å—Ç–∏ —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –º–æ–∂–Ω–æ –¥–∏—Å–∫—É—Ç–∏—Ä–æ–≤–∞—Ç—å. 
–õ–∏—á–Ω–æ –º–Ω–µ –±–æ–ª—å—à–µ –Ω—Ä–∞–≤–∏—Ç—Å—è, –∫–æ–≥–¥–∞ —Å—É—â–µ—Å—Ç–≤–æ —Å–∞–º–æ —Å–µ–±–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ü–µ–ª—å —á–µ—Ä–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–∏—Å–∫—É, –∞ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –ø—É—Ç—å –∏–∑–≤–Ω–µ. 
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ(–∫–∞–∫ –º–Ω–µ –±–æ–ª—å—à–µ –Ω—Ä–∞–≤–∏—Ç—Å—è) —Å—É—â–µ—Å—Ç–≤–æ –∫–∞–∫ –±—ã —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É–µ—Ç—Å—è —Å–≤–æ–µ–π –≤–æ–ª–µ–π, –∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —á—É–∂–∏–µ –∫–æ–º–∞–Ω–¥—ã.

**11. Predator/Herbivore extends Creature**

–ù–∞—Ä—É—à–µ–Ω–∏–µ DRY. –ò–¥–µ–Ω—Ç–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, –≤—ã–Ω–µ—Å–∏ –µ–≥–æ –≤ –æ–±—â–µ–≥–æ –ø—Ä–µ–¥–∫–∞- –≤ Creature
```
@Override
public boolean isPassable() {
  return false;
}
```

**12. interface Actions –∏ –∫–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

- –ó—Ä—è –∑–∞–∫–æ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª, –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ interface Action –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–∏–Ω –º–µ—Ç–æ–¥. 
–°–µ–π—á–∞—Å `Actions` —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –º–∞—Ä–∫–µ—Ä–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –≤ —ç—Ç–æ–º –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç –Ω–µ–≥–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∑–∞–¥–∞—á–∏ —Ç–æ–ª–∫—É –Ω–µ–º–Ω–æ–≥–æ
```
public interface Actions {
//  void execute(SimulationMap simulationMap);
}
```

–ò–¥–µ—è —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–µ–º–µ–π—Å—Ç–≤–æ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤, –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö –æ–±—â–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.  
–ö–∞–∂–¥—ã–π –∏–∑ —ç—Ç–∏—Ö –∫–ª–∞—Å—Å–æ–≤ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ —Å–≤–æ–µ —Å –∫–∞—Ä—Ç–æ–π: –æ–¥–Ω–∞ –∞–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –∑–∞—Å–µ–ª—è—Ç—å –∫–∞—Ä—Ç—É —Å—É—â–µ—Å—Ç–≤–∞–º–∏, –¥—Ä—É–≥–∞—è –¥–µ–ª–∞—Ç—å —Ö–æ–¥—ã –∏ —Ç.–¥.  
Action, –∏–∑–ª–æ–∂–µ–Ω–Ω—ã–π –≤ –¢–ó, —ç—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Command.   

–î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—â–∏–π –∫–ª–∞—Å—Å/–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Action –∏ –µ–≥–æ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏.  
–≠—Ç–æ —Å–≤–æ–µ–≥–æ —Ä–æ–¥–∞ –≤–∞—Ä–∏–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Command.  
–¢.–µ. –∞–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã –∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º. –ü—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫
```
interface Action{
 void execute(–ö–∞—Ä—Ç–∞ –∫–∞—Ä—Ç–∞);
}

class –•–æ–¥–∏—Ç—åAction —Ä–µ–∞–ª–∏–∑—É–µ—Ç Action {
  void execute(–ö–∞—Ä—Ç–∞ –∫–∞—Ä—Ç–∞) {
    //–æ–±–æ–π—Ç–∏ –≤—Å—é –∫–∞—Ä—Ç—É
    //–Ω–∞–π—Ç–∏ –∫–∞–∂–¥—É—é –∫—Ä–µ–∞—Ç—É—Ä—É
    //–∏ –¥–∞—Ç—å –µ–π –ø–∏–Ω–∫–∞ —á—Ç–æ–± –ø–æ–±–µ–∂–∞–ª–∞
  }
}

class –î–∞—Ç—å–°–∏–≥–∞—Ä–µ—Ç—É–í—Å–µ–º–ó–∞–π—Ü–∞–ºAction —Ä–µ–∞–ª–∏–∑—É–µ—Ç Action {
  void execute(–ö–∞—Ä—Ç–∞ –∫–∞—Ä—Ç–∞) {
    //–æ–±–æ–π—Ç–∏ –≤—Å—é –∫–∞—Ä—Ç—É
    //–Ω–∞–π—Ç–∏ –≤—Å–µ—Ö –∑–∞–π—Ü–µ–≤ –∏ –¥–∞—Ç—å –∏–º –ø–æ —Å–∏–≥–∞—Ä–µ—Ç–µ 
  }
}

List<Action> actions = List.of{new –î–∞—Ç—å–°–∏–≥–∞—Ä–µ—Ç—É–í—Å–µ–º–ó–∞–π—Ü–∞–ºAction(), new –•–æ–¥–∏—Ç—åAction()};
for(Action a: actions) {
  a.execute(–∫–∞—Ä—Ç–∞);
}

/*
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±–æ–π–¥–µ—Ç –≤—Å—é –∫–∞—Ä—Ç—É, –Ω–∞–π–¥–µ—Ç –≤—Å–µ—Ö –∫—Ä–µ–∞—Ç—É—Ä –∏ –¥–∞—Å—Ç –∏–º –ø–∏–Ω–∫–∞, —á—Ç–æ–±—ã –æ–Ω–∏ –ø–æ–±–µ–∂–∞–ª–∏.
–ê –∫–∞–∂–¥–æ–º—É –∑–∞–π—Ü—É –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –¥–∞—Å—Ç —Å–∏–≥–∞—Ä–µ—Ç—É.
*/
```

- –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Action –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –∏ –≤ –∫–∞–∂–¥–æ–º –∫–ª–∞—Å—Å–µ-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç—Ç–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Ç–æ–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥. 
–ê –ø—Ä–æ—Ç–µ–∫—Ç–µ–¥ –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤- —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ.

**13. class MaintainAction implements Actions**

–ù–∞—Ä—É—à–µ–Ω–∏–µ DRY
```
List<Entity> tree = simulationMap.getEntityByType(Tree.class);
if (mapArea / tree.size() > 10) {
  entitySpawnerAction.placeEntitiesRandomly(simulationMap, 1, Tree::new);
}

List<Entity> herbivore = simulationMap.getEntityByType(Herbivore.class);
if (mapArea / herbivore.size() > 10) {
  entitySpawnerAction.placeEntitiesRandomly(simulationMap, 1, c -> new Herbivore(c, 3, 100));
}
//–µ—â–µ –º–∏–ª–ª–∏–æ–Ω —Ç–∞–∫–∏—Ö –±–ª–æ–∫–æ–≤

//–ü–†–ê–í–ò–õ–¨–ù–û:
spawn(simulationMap, Tree.class, mapArea, 10, Tree::new);
spawn(simulationMap, Herbivore.class, mapArea, 10, c -> new Herbivore(c, 3, 100));

private void spawn(SimulationMap simulationMap, Class<? extends Entity> clazz, int mapArea, int limit, Function<Coordinates, Entity> factory) {
  List<Entity> entities = simulationMap.getEntityByType(clazz);
  if (mapArea / entities.size() >= limit) {
    entitySpawnerAction.placeEntitiesRandomly(simulationMap, 1, factory);
  }
}
```

- –í—Å–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞, —Ç–æ –µ—Å—Ç—å –ª–∏–º–∏—Ç —Å—É—â–µ—Å—Ç–≤ –∏ –∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –Ω—É–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã.

**14. class EntitySpawnerAction implements Actions**

–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞.

**15. class MoveAction implements Actions**

–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã- —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ—è—Å–Ω–æ, –æ—Ç–∫—É–¥–∞ –±–µ—Ä–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ –∫–ª–∞—Å—Å–µ –º–µ—Ç–æ–¥
```
//–°–û –°–¢–ê–¢–ò–ß–ï–°–ö–ò–ú –ò–ú–ü–û–†–¢–û–ú:
public class MoveAction implements Actions {
  public void makeMove(SimulationMap simulationMap) {
    List<Coordinates> path = findPath(creature, simulationMap, creature.getTarget());
    //...
  }
}

//–ë–ï–ó –ù–ï–ì–û:
public class MoveAction implements Actions {
  public void makeMove(SimulationMap simulationMap) {
    List<Coordinates> path = Path.findPath(creature, simulationMap, creature.getTarget());
    //...
  }
}
```

**16. class Sprites**, —Ö—Ä–∞–Ω–∏—Ç —Å–ø—Ä–∞–π—Ç—ã —Å—É—â–µ—Å—Ç–≤

- –í switch-case –≤ default –Ω—É–∂–Ω–æ –∫–∏–¥–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ. 
–ü–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å—É—â–µ—Å—Ç–≤–∞ –≤ –ø—Ä–æ–µ–∫—Ç, –º–æ–∂–Ω–æ –∑–∞–±—ã—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ —Å–ø—Ä–∞–π—Ç –≤ —Ä–∞—Å–ø–µ—á–∞—Ç–∫—É. 
–ò —ç—Ç—É —Å–∏—Ç—É–∞—Ü–∏—é –Ω—É–∂–Ω–æ –≤—ã—è–≤–∏—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ —Ä–∞–Ω—å—à–µ.

- –ö–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å final –∏ –∏–º–µ—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä.

**17. class Renderer**

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—á–∞—Ç–∞—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É —Å –±–æ–ª–µ–µ, —á–µ–º –æ–¥–Ω–∏–º –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä—å —Å–æ–æ–±—â–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–π —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥- —Ç–æ–≥–¥–∞ —Å—Ä–∞–∑—É –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω –≤–µ—Å—å —à–∞–±–ª–æ–Ω
```
System.out.print("[" + "." + Sprites.selectSprite(simulationMap.getEntity(coordinates)) + "."  + "]");

//–ü–†–ê–í–ò–õ–¨–ù–û:
Entity entity = simulationMap.getEntity(coordinates);
String sprite = Sprites.selectSprite(entity);
System.out.printf("[.%s.]", sprite);
```

**18. class Simulation**

–ò–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ Action'—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ —Å–¥–µ–ª–∞–Ω—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç–æ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–Ω–∏ –∑–¥–µ—Å—å –Ω–µ —Ç–∞–∫, –∫–∞–∫ –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –±—ã
```
private final EntitySpawnerAction entitySpawnerAction = new EntitySpawnerAction();
private final MoveAction moveAction = new MoveAction();
private final MaintainAction maintainAction = new MaintainAction();

entitySpawnerAction.spawnEntities(simulationMap);
moveAction.makeMove(simulationMap);
maintainAction.checkAndAddEntities(simulationMap);

//–î–û–õ–ñ–ù–û –ë–´–¢–¨ –¢–ê–ö:
private final List<Action> initActions = List.of(new EntitySpawnerAction());
private final List<Action> turnActions = List.of(new MoveAction(), new MaintainAction());

executeActions(initActions);
executeActions(turnActions);

private void executeActions(List<Action> actions) {
  for(Action a : actions) {
    a.execute(simulationMap);  
  }
}
```
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Action'–æ–≤ —á–µ—Ä–µ–∑ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º, –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—É—é –∏ –≥–∏–±–∫—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

- –ë–æ–ª—å—à–æ–π –º–µ—Ç–æ–¥  `startSimulation()` - 40 —Å—Ç—Ä–æ–∫. 

–ï—Å–ª–∏ –º–µ—Ç–æ–¥ –±–æ–ª—å—à–µ 10-20 —Å—Ç—Ä–æ–∫, –∑–Ω–∞—á–∏—Ç –æ–Ω –¥–µ–ª–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö –¥–µ–ª. 
–ö–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –¥–µ–ª–æ.  
–ù–∞–ø—Ä–∏–º–µ—Ä, —Å–º–æ—Ç—Ä–∏–º –Ω–∞ –∫–æ–¥ –±–æ–ª—å—à–æ–≥–æ –º–µ—Ç–æ–¥–∞ –∏ –Ω–∞—Ö–æ–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–º—ã—Å–ª–æ–≤—ã–µ –±–ª–æ–∫–∏
```
public void startSimulation() {
  while (true) {
   //–º–∏–ª–ª–∏–æ–Ω —Å—Ç—Ä–æ–∫
   try {
     Thread.sleep(1000);
    } catch (InterruptedException e) {
      throw new RuntimeException(e);
    }
  }
}
```
–í—ã–Ω–æ—Å–∏–º —ç—Ç–∏ –±–ª–æ–∫–∏ –≤–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
```
public void startSimulation() {
  while (true) {
   //–º–∏–ª–ª–∏–æ–Ω —Å—Ç—Ä–æ–∫
   pause();
  }
}

private void pause() {
  try {
    Thread.sleep(1000);
  } catch (InterruptedException e) {
    throw new RuntimeException(e);
  }
}
```
*–ú–∞—Ä—Ç–∏–Ω "–ß–ö, –≥–ª.3"*  
*–§–∞—É–ª–µ—Ä "–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥", –≥–ª.6, "–í—ã–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞"*

**19. class Main**, —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ main

üëç –¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –°–∏–º—É–ª—è—Ü–∏—é, —ç—Ç–æ —Ö–æ—Ä–æ—à–æ.

## –í–´–í–û–î

–°–¥–µ–ª–∞—Ç—å Action'—ã –ø–æ –¢–ó.

n.87(195)  
#—Ä–µ–≤—å—é #—Å–∏–º—É–ª—è—Ü–∏—è #–ø—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç—å 